var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},egret;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this)||this;return i._transformDirty=!0,i._color={r:1,g:1,b:1,a:1},i._bkNode=t||new BK.Node,i}return __extends(i,e),i.prototype._replaceNode=function(t){this._transformDirty=!0,t.vertexColor=this._color,t.hidden=!this.visible,this._bkNode.parent&&(this._bkNode.parent.addChild(t,this.parent.getChildIndex(this)),this._bkNode.parent.removeChild(this._bkNode)),t.zOrder=this._bkNode.zOrder,this._bkNode=t},i.prototype.$setVisible=function(t){e.prototype.$setVisible.call(this,t),this._bkNode.hidden=!t},i.prototype.$setAlpha=function(t){e.prototype.$setAlpha.call(this,t),this._color.a=t,this._bkNode.vertexColor=this._color},i.prototype.$setX=function(t){var e=this;return e.$x==t?!1:(e.$x=t,this._transformDirty=!0,!0)},i.prototype.$setY=function(t){var e=this;return e.$y==t?!1:(e.$y=t,this._transformDirty=!0,!0)},i.prototype.$hitTest=function(t,e){var i=this;if(!i.$visible)return null;var r=i.$getInvertedConcatenatedMatrix();if(0==r.a&&0==r.b&&0==r.c&&0==r.d)return null;var n=i.$getContentBounds(),o=r.a*t+r.c*e+r.tx,s=r.b*t+r.d*e+r.ty;if(n.contains(o,s)){if(!i.$children){var h=i.$scrollRect?i.$scrollRect:i.$maskRect;if(h&&!h.contains(o,s))return null;if(i.$mask&&!i.$mask.$hitTest(t,e))return null}return i}return null},i.prototype.$getRenderNode=function(){if(this._transformDirty||this.$matrixDirty){this._transformDirty=!1;var t=this.$getMatrix(),e=this._bkNode.transform.matrix,i=t.tx,r=t.ty,n=this.$anchorOffsetX,o=this.$anchorOffsetY;(0!==n||0!==o)&&(i-=t.a*n+t.c*o,r-=t.b*n+t.d*o),e.set(t.a,-t.b,-t.c,t.d,i,-r)}return this._bkNode},i.prototype.$onAddToStage=function(i,r){e.prototype.$onAddToStage.call(this,i,r);var n=t.BKPlayer.instance._displayList.indexOf(this);0>n&&t.BKPlayer.instance._displayList.push(this)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);var i=t.BKPlayer.instance._displayList.indexOf(this);i>=0&&t.BKPlayer.instance._displayList.splice(i,1)},i}(t.DisplayObject);t.BKDisplayObject=e,__reflect(e.prototype,"egret.BKDisplayObject"),t.DisplayObject=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this,new BK.ClipRectNode(0,-2048,2048,2048))||this;return t.$touchChildren=!0,t._bkClipRectNode=t._bkNode,t._bkClipRectNode.enableClip=!1,t.$children=[],t}return __extends(i,e),Object.defineProperty(i.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},i.prototype.addChildAt=function(t,e){return e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},i.prototype.$doAddChild=function(e,i,r){void 0===r&&(r=!0);var n=this,o=e.$parent;if(o==n)return n.doSetChildIndex(e,i),e;o&&o.removeChild(e),n.$children.splice(i,0,e),e.$setParent(n);var s=n.$stage;if(s&&e.$onAddToStage(s,n.$nestLevel+1),r&&e.dispatchEventWith(t.Event.ADDED,!0),s)for(var h=t.DisplayObjectContainer.$EVENT_ADD_TO_STAGE_LIST;h.length;){var a=h.shift();a.$stage&&r&&a.dispatchEventWith(t.Event.ADDED_TO_STAGE)}this._bkNode.addChild(e._bkNode,i);for(var l=0,c=this.$children.length;c>l;l++)this.$children[l]._bkNode.zOrder=-l;return this.$childAdded(e,i),e},i.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},i.prototype.getChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$children[t]:null},i.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},i.prototype.getChildByName=function(t){for(var e,i=this.$children,r=i.length,n=0;r>n;n++)if(e=i[n],e.name==t)return e;return null},i.prototype.removeChild=function(t){var e=this.$children.indexOf(t);return e>=0?this.$doRemoveChild(e):null},i.prototype.removeChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$doRemoveChild(t):null},i.prototype.$doRemoveChild=function(e,i){void 0===i&&(i=!0),e=0|+e;var r=this.$children,n=r[e];if(this.$childRemoved(n,e),i&&n.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){n.$onRemoveFromStage();for(var o=t.DisplayObjectContainer.$EVENT_REMOVE_FROM_STAGE_LIST;o.length>0;){var s=o.shift();i&&s.$hasAddToStage&&(s.$hasAddToStage=!1,s.dispatchEventWith(t.Event.REMOVED_FROM_STAGE)),s.$hasAddToStage=!1,s.$stage=null}}this.$displayList||this.$parentDisplayList;n.$setParent(null);var h=r.indexOf(n);return-1!=h&&r.splice(h,1),this._bkNode.removeChild(n._bkNode),n},i.prototype.setChildIndex=function(t,e){e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},i.prototype.doSetChildIndex=function(t,e){var i=this.$children.indexOf(t);if(i!=e){this.$childRemoved(t,i),this.$children.splice(i,1),this.$children.splice(e,0,t),this.$childAdded(t,e),this._bkNode.removeChild(t._bkNode),this._bkNode.addChild(t._bkNode,e);for(var r=0,n=this.$children.length;n>r;r++)this.$children[r]._bkNode.zOrder=-r}},i.prototype.swapChildrenAt=function(t,e){t=0|+t,e=0|+e,t>=0&&t<this.$children.length&&e>=0&&e<this.$children.length&&this.doSwapChildrenAt(t,e)},i.prototype.swapChildren=function(t,e){var i=this.$children.indexOf(t),r=this.$children.indexOf(e);-1==i||-1==r||this.doSwapChildrenAt(i,r)},i.prototype.doSwapChildrenAt=function(t,e){if(t>e){var i=e;e=t,t=i}else if(t==e)return;var r=this.$children,n=r[t],o=r[e];this.$childRemoved(n,t),this.$childRemoved(o,e),r[t]=o,r[e]=n,this.$childAdded(o,t),this.$childAdded(n,e),o._bkNode.zOrder=-t,n._bkNode.zOrder=-e},i.prototype.removeChildren=function(){for(var t=this.$children,e=t.length-1;e>=0;e--)this.$doRemoveChild(e)},i.prototype.$childAdded=function(t,e){},i.prototype.$childRemoved=function(t,e){},i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var r=this.$children,n=r.length;i++;for(var o=0;n>o;o++){var s=this.$children[o];s.$onAddToStage(t,i)}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,r=0;i>r;r++){var n=t[r];n.$onRemoveFromStage()}},i.prototype.$measureChildBounds=function(e){var i=this.$children,r=i.length;if(0!=r){for(var n=0,o=0,s=0,h=0,a=!1,l=-1;r>l;l++){var c=-1==l?e:i[l].$getTransformedBounds(this,t.$TempRectangle);c.isEmpty()||(a?(n=Math.min(n,c.x),o=Math.max(o,c.x+c.width),s=Math.min(s,c.y),h=Math.max(h,c.y+c.height)):(a=!0,n=c.x,o=n+c.width,s=c.y,h=s+c.height))}e.setTo(n,s,o-n,h-s)}},Object.defineProperty(i.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),i.prototype.$getTouchChildren=function(){return this.$touchChildren},i.prototype.$setTouchChildren=function(t){return this.$touchChildren==t?!1:(this.$touchChildren=t,!0)},i.prototype.$hitTest=function(t,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*t+r.c*i+r.tx,o=r.b*t+r.d*i+r.ty,s=this.$scrollRect?this.$scrollRect:this.$maskRect;if(s&&!s.contains(n,o))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var h=this.$children,a=!1,l=null,c=h.length-1;c>=0;c--){var d=h[c];if(!d.$maskedObject&&(l=d.$hitTest(t,i))){if(a=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:a?this:e.prototype.$hitTest.call(this,t,i)},Object.defineProperty(i.prototype,"scrollRect",{set:function(e){var i=this;(e||i.$scrollRect)&&(this._transformDirty=!0,e?(i.$scrollRect||(i.$scrollRect=new t.Rectangle,this._bkClipRectNode.enableClip=!0),i.$scrollRect.copyFrom(e),this._bkClipRectNode.clipRegion={x:i.$scrollRect.x,y:-i.$scrollRect.y-i.$scrollRect.height,width:i.$scrollRect.width,height:i.$scrollRect.height}):(i.$scrollRect=null,this._bkClipRectNode.enableClip=!1))},enumerable:!0,configurable:!0}),i.prototype.$getRenderNode=function(){if(this._transformDirty||this.$matrixDirty){this._transformDirty=!1;var t=this.$getMatrix(),e=this._bkNode.transform.matrix,i=t.tx,r=t.ty,n=this.$anchorOffsetX,o=this.$anchorOffsetY;(0!==n||0!==o)&&(i-=t.a*n+t.c*o,r-=t.b*n+t.d*o),this.$scrollRect&&(i-=this.$scrollRect.x,r-=this.$scrollRect.y),e.set(t.a,-t.b,-t.c,t.d,i,-r)}return this._bkNode},i.$EVENT_ADD_TO_STAGE_LIST=[],i.$EVENT_REMOVE_FROM_STAGE_LIST=[],i}(t.BKDisplayObject);t.BKDisplayObjectContainer=e,__reflect(e.prototype,"egret.BKDisplayObjectContainer"),t.DisplayObjectContainer=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this,new BK.Sprite(0,0,{},0,1,1,1))||this;return i.$explicitBitmapWidth=0/0,i.$explicitBitmapHeight=0/0,i._size={width:0,height:0},i.$bitmapData=null,i.$texture=null,i.$scale9Grid=null,i._bkSprite=i._bkNode,i.texture=t,i}return __extends(i,e),Object.defineProperty(i.prototype,"texture",{get:function(){return this.$texture},set:function(t){this.$texture!==t&&this.$setTexture(t)},enumerable:!0,configurable:!0}),i.prototype.$setTexture=function(t){this.$texture=t,this._transformDirty=!0,this.$texture?(this.$bitmapData=this.$texture.bitmapData,this.$bitmapData.bkTexture?(this._bkSprite.setTexture(this.$bitmapData.bkTexture),this._bkSprite.adjustTexturePosition(this.$texture.$bitmapX,this.$texture.$sourceHeight-(this.$texture.$bitmapY+this.$texture.$bitmapHeight),this.$texture.$bitmapWidth,this.$texture.$bitmapHeight,this.$texture.$rotated),this._size.width=this.$texture.$bitmapWidth,this._size.height=this.$texture.$bitmapHeight,this._bkSprite.size=this._size):(this.$bitmapData=null,this._bkSprite.setTexture({}))):(this.$bitmapData=null,this._bkSprite.setTexture({}))},Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$setScale9Grid(t)},enumerable:!0,configurable:!0}),i.prototype.$setScale9Grid=function(e){var i=this;i.$scale9Grid!=e&&(i.$scale9Grid?e?this._bkSprite.setScale9Grid(e):(this._bkSprite=new BK.Sprite(0,0,{},0,1,1,1),this._replaceNode(this._bkSprite),this.$setTexture(this.$texture)):e&&(this._bkSprite=new t.BKSprite9,this._replaceNode(this._bkSprite),this._bkSprite.setScale9Grid(e),this.$setTexture(this.$texture)),this._bkSprite.size=this._size,i.$scale9Grid=e,i.$renderDirty=!0)},i.prototype.$setWidth=function(t){var e=this;return 0>t||t==e.$explicitBitmapWidth?!1:(e.$explicitBitmapWidth=t,this._transformDirty=!0,this._size.width=t,this._bkSprite.size=this._size,!0)},i.prototype.$setHeight=function(t){var e=this;return 0>t||t==e.$explicitBitmapHeight?!1:(e.$explicitBitmapHeight=t,this._transformDirty=!0,this._size.height=t,this._bkSprite.size=this._size,!0)},i.prototype.$getWidth=function(){return isNaN(this.$explicitBitmapWidth)?this.$getContentBounds().width:this.$explicitBitmapWidth},i.prototype.$getHeight=function(){return isNaN(this.$explicitBitmapHeight)?this.$getContentBounds().height:this.$explicitBitmapHeight},i.prototype.$measureContentBounds=function(t){if(this.$texture){var e=isNaN(this.$explicitBitmapWidth)?this.$texture.$getTextureWidth():this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?this.$texture.$getTextureHeight():this.$explicitBitmapHeight;t.setTo(0,0,e,i)}else{var e=isNaN(this.$explicitBitmapWidth)?0:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?0:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}},i.prototype.$getRenderNode=function(){if(this._transformDirty||this.$matrixDirty){this._transformDirty=!1;var t=this.$getMatrix(),e=this._bkNode.transform.matrix,i=t.tx,r=t.ty,n=this.$anchorOffsetX,o=this.$anchorOffsetY-this._size.height;(0!==n||0!==o)&&(i-=t.a*n+t.c*o,r-=t.b*n+t.d*o),e.set(t.a,-t.b,-t.c,t.d,i,-r)}return this._bkNode||null},i}(t.BKDisplayObject);t.BKBitmap=e,__reflect(e.prototype,"egret.BKBitmap"),t.Bitmap=e}(egret||(egret={}));var egret;!function(t){var e=function(){function t(t,e){this.surface={},this.context={}}return Object.defineProperty(t.prototype,"width",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.resize=function(t,e,i){},t.prototype.getPixels=function(t,e,i,r){return void 0===i&&(i=1),void 0===r&&(r=1),[]},t.prototype.toDataURL=function(t,e){return""},t.prototype.clear=function(){},t.prototype.destroy=function(){},t}();t.BKRenderBuffer=e,__reflect(e.prototype,"egret.BKRenderBuffer",["egret.sys.RenderBuffer"]),t.sys.RenderBuffer=e}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.prototype.render=function(t,e,i,r){return 0},t.prototype.drawNodeToBuffer=function(t,e,i,r){},t}();t.BKSystemRenderer=e,__reflect(e.prototype,"egret.BKSystemRenderer",["egret.sys.SystemRenderer"])}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.width=0,i.height=0,i.source="",i.bkTexture=null,i.source=e,"string"==typeof i.source&&(i.bkTexture=new BK.Texture(i.source),i.width=i.bkTexture.size.width,i.height=i.bkTexture.size.height),i}return __extends(e,t),e.$invalidate=function(){},e}(t.HashObject);t.BKBitmapData=e,__reflect(e.prototype,"egret.BKBitmapData"),t.BitmapData=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._url="",t._method="",t.urlData={},t.responseHeader="",t}return __extends(i,e),Object.defineProperty(i.prototype,"responseType",{get:function(){return this._responseType},set:function(t){this._responseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"response",{get:function(){return this._response},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(t){this._withCredentials=t},enumerable:!0,configurable:!0}),i.prototype.open=function(t,e){void 0===e&&(e="GET"),this._url=t,this._method=e},i.prototype.send=function(e){var i=this;if(i.isNetUrl(i._url)){this._bkHttpRequest=new BK.HttpUtil(this._url);var r=void 0;this._method===t.HttpMethod.GET?r="get":this._method===t.HttpMethod.POST&&(r="post"),this._bkHttpRequest.setHttpMethod(r),this._method===t.HttpMethod.POST&&this._bkHttpRequest.setHttpPostData(e),this._bkHttpRequest.setHttpCookie(e),this._bkHttpRequest.requestAsync(function(e,r){if(200===Number(r)){var n=void 0;i._responseType===t.HttpResponseType.ARRAY_BUFFER||(n=e.readAsString()||""),i._response=n,t.$callAsync(t.Event.dispatchEvent,t.Event,i,t.Event.COMPLETE)}else t.$warn(1019,r),t.Event.dispatchEvent(i,t.IOErrorEvent.IO_ERROR)})}else if(BK.FileUtil.isFileExist(i._url))if(i._responseType===t.HttpResponseType.ARRAY_BUFFER)t.$callAsync(t.Event.dispatchEvent,t.IOErrorEvent,i,t.IOErrorEvent.IO_ERROR);else{var n=BK.FileUtil.readFile(i._url);i._response=n.readAsString(),t.$callAsync(t.Event.dispatchEvent,t.Event,i,t.Event.COMPLETE)}else t.$callAsync(t.Event.dispatchEvent,t.IOErrorEvent,i,t.IOErrorEvent.IO_ERROR)},i.prototype.isNetUrl=function(t){return-1!=t.indexOf("http://")||-1!=t.indexOf("HTTP://")||-1!=t.indexOf("https://")||-1!=t.indexOf("HTTPS://")},i.prototype.abort=function(){},i.prototype.onResponseHeader=function(t){this.responseHeader="";var e=JSON.parse(t);for(var i in e)this.responseHeader+=i+": "+e[i]+"\r\n"},i.prototype.getAllResponseHeaders=function(){return this.responseHeader},i.prototype.setRequestHeader=function(t,e){this.headerObj||(this.headerObj={}),this.headerObj[t]=e},i.prototype.getResponseHeader=function(t){return""},i}(t.EventDispatcher);t.BKHttpRequest=e,__reflect(e.prototype,"egret.BKHttpRequest",["egret.HttpRequest"]),t.HttpRequest=e}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}return e.prototype.addCallBacks=function(t,e,i,r,n){this.onConnect=t,this.onClose=e,this.onSocketData=i,this.onError=r,this.thisObject=n},e.prototype.connect=function(t,e){var i=t+":"+e;this.connectByUrl(i)},e.prototype.connectByUrl=function(t){this.$websocket=new BK.WebSocket(t),this.$websocket.connect(),this._bindEvent()},e.prototype._bindEvent=function(){var e=this,i=this.$websocket;i.onOpen=function(t){e.onConnect&&e.onConnect.call(e.thisObject)},i.onClose=function(t){e.onClose&&e.onClose.call(e.thisObject)},i.onError=function(t){e.onError&&e.onError.call(e.thisObject)},i.onMessage=function(i,r){if(e.onSocketData){var n=void 0;if(r.isBinary){var o=r.data,s=o.readAsString(),h=new t.ByteArray;h.writeUTF(s),n=h.rawBuffer}else n=r.data.readAsString();e.onSocketData.call(e.thisObject,n)}}},e.prototype.send=function(e){if("string"==typeof e)this.$websocket.send(e);else if(e instanceof ArrayBuffer){var i=new t.ByteArray(e),r=i.readUTF(),n=new BK.Buffer(r.length);n.writeAsString(r),this.$websocket.send(n)}},e.prototype.resHandler=function(e){switch(e.type){case t.Event.COMPLETE:var i=e.currentTarget;i.response;console.log()}},e.prototype.close=function(){this.$websocket.close()},e.prototype.disconnect=function(){},e}();t.BKSocket=e,__reflect(e.prototype,"egret.BKSocket",["egret.ISocket"]),t.ISocket=e}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this._contentWidth=0,this._contentHeight=0,this._size={width:0,height:0},this._rawGrid=new t.Rectangle,this._grid=new t.Rectangle,this._leftTop=new BK.Sprite(0,0,{},0,1,1,1),this._centerTop=new BK.Sprite(0,0,{},0,1,1,1),this._rightTop=new BK.Sprite(0,0,{},0,1,1,1),this._leftCenter=new BK.Sprite(0,0,{},0,1,1,1),this._centerCenter=new BK.Sprite(0,0,{},0,1,1,1),this._rightCenter=new BK.Sprite(0,0,{},0,1,1,1),this._leftBottom=new BK.Sprite(0,0,{},0,1,1,1),this._centerBottom=new BK.Sprite(0,0,{},0,1,1,1),this._rightBottom=new BK.Sprite(0,0,{},0,1,1,1),this.__nativeObj=new BK.Node;var e=Object.getOwnPropertyNames(this.__nativeObj);e.forEach(function(t){var e=t;Object.defineProperty(this,e,{get:function(){return this.__nativeObj[e]},set:function(t){this.__nativeObj[e]=t}})},this),this.__nativeObj.addChild(this._leftTop),this.__nativeObj.addChild(this._centerTop),this.__nativeObj.addChild(this._rightTop),this.__nativeObj.addChild(this._leftCenter),this.__nativeObj.addChild(this._centerCenter),this.__nativeObj.addChild(this._rightCenter),this.__nativeObj.addChild(this._leftBottom),this.__nativeObj.addChild(this._centerBottom),this.__nativeObj.addChild(this._rightBottom)}return e.prototype._updateGrid=function(){this._grid.x=this._rawGrid.x,this._grid.y=this._rawGrid.y,this._grid.width=this._contentWidth-this._rawGrid.x-this._rawGrid.width,this._grid.height=this._contentHeight-this._rawGrid.y-this._rawGrid.height},e.prototype.dispose=function(){this.__nativeObj.dispose()},e.prototype.setTexture=function(t){this._leftTop.setTexture(t),this._centerTop.setTexture(t),this._rightTop.setTexture(t),this._leftCenter.setTexture(t),this._centerCenter.setTexture(t),this._rightCenter.setTexture(t),this._leftBottom.setTexture(t),this._centerBottom.setTexture(t),this._rightBottom.setTexture(t)},e.prototype.setScale9Grid=function(t){this._rawGrid.setTo(t.x,t.y,t.width,t.height),this._updateGrid()},e.prototype.adjustTexturePosition=function(t,e,i,r,n){this._contentWidth=i,this._contentHeight=r,this._updateGrid();var o=this._grid.x,s=this._grid.y,h=this._grid.width,a=this._grid.height,l=i-o-h,c=r-s-a;if(n===!0);else{var d=t,u=t+o,p=t+(i-h),f=e,g=e+a,y=e+(r-s);this._leftTop.adjustTexturePosition(d,y,o,s),this._centerTop.adjustTexturePosition(u,y,l,s),this._rightTop.adjustTexturePosition(p,y,h,s),this._leftCenter.adjustTexturePosition(d,g,o,c),this._centerCenter.adjustTexturePosition(u,g,l,c),this._rightCenter.adjustTexturePosition(p,g,h,c),this._leftBottom.adjustTexturePosition(d,f,o,a),this._centerBottom.adjustTexturePosition(u,f,l,a),this._rightBottom.adjustTexturePosition(p,f,h,a)}},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){var e=this._size.width=t.width,i=this._size.height=t.height,r=this._grid.x,n=this._grid.y,o=this._grid.width,s=this._grid.height;if(r+o>e){var h=.5*(r+o-e);r-=h,o-=h}if(n+s>i){var a=.5*(n+s-i);n-=a,s-=a}var l=e-r-o,c=i-n-s;this._leftTop.position={x:0,y:s+c},this._centerTop.position={x:r,y:s+c},this._rightTop.position={x:r+l,y:s+c},this._leftCenter.position={x:0,y:s},this._centerCenter.position={x:r,y:s},this._rightCenter.position={x:r+l,y:s},this._leftBottom.position={x:0,y:0},this._centerBottom.position={x:r,y:0},this._rightBottom.position={x:r+l,y:0},this._leftTop.size={width:r+1,height:n+1},this._centerTop.size={width:l+1,height:n+1},this._rightTop.size={width:o,height:n+1},this._leftCenter.size={width:r+1,height:c+1},this._centerCenter.size={width:l+1,height:c+1},this._rightCenter.size={width:o+1,height:c+1},this._leftBottom.size={width:r+1,height:s},this._centerBottom.size={width:l+1,height:s},this._rightBottom.size={width:o,height:s}},enumerable:!0,configurable:!0}),e}();t.BKSprite9=e,__reflect(e.prototype,"egret.BKSprite9")}(egret||(egret={})),console=console||{},console.warn=console.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i="";if(t)for(var r=0,n=t;r<n.length;r++){var o=n[r];i+=o}BK.Script.log(0,0,i)},console.assert=console.log;var egret;!function(t){function e(t,e,i){BK.Director.ticker.setTimeout(t,i,e)}function i(t){BK.Director.ticker.removeTimeout(t)}function r(e){h||(h=!0,n(),o(),e||(e={}),e.screenAdapter?t.sys.screenAdapter=e.screenAdapter:t.sys.screenAdapter||(t.sys.screenAdapter=new t.sys.DefaultScreenAdapter),t.sys.systemRenderer=new t.BKSystemRenderer,t.sys.canvasRenderer=new t.BKSystemRenderer,s=new t.BKPlayer(e))}function n(){}function o(){"undefined"!=typeof eui&&(Object.defineProperty(eui.Image.prototype,"scale9Grid",{set:function(t){this.$setScale9Grid(t)},enumerable:!0,configurable:!0}),eui.Image.prototype.$getRenderNode=function(){var t=this.$bitmapData;if(!t)return null;var e=this.$UIComponent,i=e[10],r=e[11];if(0===i||0===r)return null;if(this._transformDirty||this.$matrixDirty){this._transformDirty=!1,this._size.width=this.$getWidth(),this._size.height=this.$getHeight(),this._bkSprite.size=this._size;var n=this.$getMatrix(),o=this._bkNode.transform.matrix,s=n.tx,h=n.ty,a=this.$anchorOffsetX,l=this.$anchorOffsetY-this._size.height;(0!==a||0!==l)&&(s-=n.a*a+n.c*l,h-=n.b*a+n.d*l),o.set(n.a,-n.b,-n.c,n.d,s,-h)}return this._bkNode}),void 0!==typeof t.WebSocket&&(t.ISocket=t.BKSocket)}t.getTimer=function(){return Math.round(1e3*BK.Time.timestamp)},t.setTimeout=e,t.clearTimeout=i;var s,h=!1;t.runEgret=r}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);return r==this&&(r=this.$graphics.$hitTest(t,i)),r},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.BKDisplayObject);t.BKShape=e,__reflect(e.prototype,"egret.BKShape"),t.Shape=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(e,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*e+r.c*i+r.tx,o=r.b*e+r.d*i+r.ty,s=this.$scrollRect?this.$scrollRect:this.$maskRect;if(s&&!s.contains(n,o))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null;for(var h=this.$children,a=!1,l=null,c=h.length-1;c>=0;c--){var d=h[c];if(!d.$maskedObject&&(l=d.$hitTest(e,i))){if(a=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:a?this:(l=t.DisplayObject.prototype.$hitTest.call(this,e,i),l&&(l=this.$graphics.$hitTest(e,i)),l)},i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.BKDisplayObjectContainer);t.BKSprite=e,__reflect(e.prototype,"egret.BKSprite"),t.Sprite=e}(egret||(egret={}));var egret;!function(t){var e=(new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![。，！、》…）)}”】\\.\\,\\!\\?\\]\\:])"),function(e){function i(){var i=e.call(this,new BK.Text(void 0,""))||this;i.$inputEnabled=!1,i.inputUtils=null,i.graphicsNode=null,i.isFlow=!1,i.textArr=[],i.linesArr=[],i.$isTyping=!1,i._bkText=i._bkNode,i.$TextField={0:t.TextField.default_size,1:0,2:t.TextField.default_textColor,3:0/0,4:0/0,5:0,6:0,7:0,8:t.TextField.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:t.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:t.TextFieldInputType.TEXT},i._bkText.fontSize=i.$TextField[0];var r=4294967295;i._bkText.fontColor=r,i._bkText.horizontalAlign=0,i._bkText.bold=i.$TextField[15],i._bkText.italic=i.$TextField[16],i._bkText.strokeSize=i.$TextField[27],i._bkText.style.width=512,i._bkText.style.height=64,i._bkText.style.maxWidth=512,i._bkText.style.maxHeight=64;var n=0;return i._bkText.shadowColor=n,i._bkText.shadowOffset={x:0,y:0},i._bkText.shadowRadius=0,i}return __extends(i,e),i.prototype.isInput=function(){return this.$TextField[24]==t.TextFieldType.INPUT},i.prototype.$setTouchEnabled=function(t){e.prototype.$setTouchEnabled.call(this,t),this.isInput()&&(this.$inputEnabled=!0)},Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this.$TextField[8]},set:function(t){this.$setFontFamily(t)},enumerable:!0,configurable:!0}),i.prototype.$setFontFamily=function(t){var e=this.$TextField;return e[8]==t?!1:(e[8]=t,this.invalidateFontString(),!0)},Object.defineProperty(i.prototype,"size",{get:function(){return this.$TextField[0]},set:function(t){this.$setSize(t)},enumerable:!0,configurable:!0}),i.prototype.$setSize=function(t){t=+t||0;var e=this.$TextField;return e[0]==t?!1:(e[0]=t,this.invalidateFontString(),this._transformDirty=!0,this._bkText.fontSize=t,!0)},Object.defineProperty(i.prototype,"bold",{get:function(){return this.$TextField[15]},set:function(t){this.$setBold(t)},enumerable:!0,configurable:!0}),i.prototype.$setBold=function(t){t=!!t;var e=this.$TextField;return t==e[15]?!1:(e[15]=t,this.invalidateFontString(),this._transformDirty=!0,this._bkText.bold=t?1:0,!0)},Object.defineProperty(i.prototype,"italic",{get:function(){return this.$TextField[16]},set:function(t){this.$setItalic(t)},enumerable:!0,configurable:!0}),i.prototype.$setItalic=function(t){t=!!t;var e=this.$TextField;return t==e[16]?!1:(e[16]=t,this.invalidateFontString(),this._transformDirty=!0,this._bkText.italic=t,!0)},i.prototype.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},Object.defineProperty(i.prototype,"textAlign",{get:function(){return this.$TextField[9]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setTextAlign=function(e){var i=this.$TextField;if(i[9]==e)return!1;switch(i[9]=e,this.$invalidateTextField(),this._transformDirty=!0,e){case t.HorizontalAlign.LEFT:this._bkText.horizontalAlign=0;break;case t.HorizontalAlign.CENTER:this._bkText.horizontalAlign=1;break;case t.HorizontalAlign.RIGHT:this._bkText.horizontalAlign=2}return!0},Object.defineProperty(i.prototype,"verticalAlign",{get:function(){return this.$TextField[10]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),i.prototype.$setVerticalAlign=function(t){var e=this.$TextField;return e[10]==t?!1:(e[10]=t,this.$invalidateTextField(),this._transformDirty=!0,!0)},Object.defineProperty(i.prototype,"lineSpacing",{get:function(){return this.$TextField[1]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),i.prototype.$setLineSpacing=function(t){t=+t||0;var e=this.$TextField;return e[1]==t?!1:(e[1]=t,this.$invalidateTextField(),!0)},Object.defineProperty(i.prototype,"textColor",{get:function(){return this.$TextField[2]},set:function(t){this.$setTextColor(t)},enumerable:!0,configurable:!0}),i.prototype.$setTextColor=function(t){t=0|+t;var e=this.$TextField;if(e[2]==t)return!1;e[2]=t,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidateTextField();var i=this._refitString(t,6),r=this._refitString(this._bkText.fontColor,8),n=r.substring(0,2)+i,o=parseInt(n,16);return this._bkText.fontColor=o,!0},Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this.$TextField[19]},set:function(t){this.$setWordWrap(t)},enumerable:!0,configurable:!0}),i.prototype.$setWordWrap=function(t){t=!!t;var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField()))},Object.defineProperty(i.prototype,"type",{get:function(){return this.$TextField[24]},set:function(t){this.$setType(t)},enumerable:!0,configurable:!0}),i.prototype.$setType=function(e){var i=this.$TextField;return i[24]!=e?(i[24]=e,e==t.TextFieldType.INPUT?(isNaN(i[3])&&this.$setWidth(100),isNaN(i[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new t.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0):!1},Object.defineProperty(i.prototype,"inputType",{get:function(){return this.$TextField[37]},set:function(t){this.$TextField[37]=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this.$getText()},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),i.prototype.$getText=function(){return this.$TextField[24]==t.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},i.prototype.$setBaseText=function(t){null==t&&(t=""),t=t.toString(),this.isFlow=!1;var e=this.$TextField;if(e[13]!=t){this.$invalidateTextField(),e[13]=t;var i="";return i=e[20]?this.changeToPassText(t):t,this.setMiddleStyle([{text:i}]),this._transformDirty=!0,this._bkText.content=i,!0}return!1},i.prototype.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},Object.defineProperty(i.prototype,"displayAsPassword",{get:function(){return this.$TextField[20]},set:function(t){this.$setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),i.prototype.$setDisplayAsPassword=function(t){var e=this.$TextField;if(e[20]!=t){e[20]=t,this.$invalidateTextField();var i="";return i=t?this.changeToPassText(e[13]):e[13],this.setMiddleStyle([{text:i}]),!0}return!1},Object.defineProperty(i.prototype,"strokeColor",{get:function(){return this.$TextField[25]},set:function(t){t=+t||0,this.$setStrokeColor(t)},enumerable:!0,configurable:!0}),i.prototype.$setStrokeColor=function(e){var i=this.$TextField;if(i[25]!=e){this.$invalidateTextField(),i[25]=e,i[26]=t.toColorString(e);var r=this._refitString(e,6),n=this._refitString(this._bkText.strokeColor,8),o=n.substring(0,2)+r,s=parseInt(o,16);return this._bkText.fontColor=s,!0}return!1},Object.defineProperty(i.prototype,"stroke",{get:function(){return this.$TextField[27]},set:function(t){this.$setStroke(t)},enumerable:!0,configurable:!0}),i.prototype.$setStroke=function(t){return this.$TextField[27]!=t?(this.$invalidateTextField(),this.$TextField[27]=t,this._transformDirty=!0,this._bkText.strokeSize=t,!0):!1},Object.defineProperty(i.prototype,"maxChars",{get:function(){return this.$TextField[21]},set:function(t){this.$setMaxChars(t)},enumerable:!0,configurable:!0}),i.prototype.$setMaxChars=function(t){return this.$TextField[21]!=t?(this.$TextField[21]=t,!0):!1
},Object.defineProperty(i.prototype,"scrollV",{get:function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},set:function(t){this.$TextField[28]=Math.max(t,1),this.$invalidateTextField()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxScrollV",{get:function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-t.TextFieldUtils.$getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),i.prototype.$setSelection=function(t,e){return!1},i.prototype.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},Object.defineProperty(i.prototype,"numLines",{get:function(){return this.$getLinesArr(),this.$TextField[29]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"multiline",{get:function(){return this.$TextField[30]},set:function(t){this.$setMultiline(t)},enumerable:!0,configurable:!0}),i.prototype.$setMultiline=function(t){return this.$TextField[30]=t,this.$invalidateTextField(),!0},Object.defineProperty(i.prototype,"restrict",{get:function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},set:function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&(i=t.indexOf("^",i),0!=i)&&i>0&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):i>0?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}},enumerable:!0,configurable:!0}),i.prototype.$setWidth=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[3]))return!1;e[3]=0/0}else{if(e[3]==t)return!1;e[3]=t}return t=+t,0>t?!1:(this.$invalidateTextField(),this._transformDirty=!0,this._bkText.style.maxWidth=this._bkText.style.width=e[3],!0)},i.prototype.$setHeight=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[4]))return!1;e[4]=0/0}else{if(e[4]==t)return!1;e[4]=t}return t=+t,0>t?!1:(this.$invalidateTextField(),this._transformDirty=!0,this._bkText.style.maxHeight=this._bkText.style.height=e[4],!0)},i.prototype.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},i.prototype.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},Object.defineProperty(i.prototype,"border",{get:function(){return this.$TextField[31]},set:function(t){this.$setBorder(t)},enumerable:!0,configurable:!0}),i.prototype.$setBorder=function(t){this.$TextField[31]=!!t},Object.defineProperty(i.prototype,"borderColor",{get:function(){return this.$TextField[32]},set:function(t){this.$setBorderColor(t)},enumerable:!0,configurable:!0}),i.prototype.$setBorderColor=function(t){this.$TextField[32]=+t||0},Object.defineProperty(i.prototype,"background",{get:function(){return this.$TextField[33]},set:function(t){this.$setBackground(t)},enumerable:!0,configurable:!0}),i.prototype.$setBackground=function(t){this.$TextField[33]=t},Object.defineProperty(i.prototype,"backgroundColor",{get:function(){return this.$TextField[34]},set:function(t){this.$setBackgroundColor(t)},enumerable:!0,configurable:!0}),i.prototype.$setBackgroundColor=function(t){this.$TextField[34]=t},i.prototype.fillBackground=function(e){var i=this.graphicsNode;i&&i.clear();var r=this.$TextField;if(r[33]||r[31]||e&&e.length>0){if(!i){i=this.graphicsNode=new t.sys.GraphicsNode;var n=new t.sys.GroupNode;n.addNode(i),n.addNode(this.textNode),this.$renderNode=n}var o=void 0,s=void 0;if(r[33]&&(o=i.beginFill(r[34]),o.drawRect(0,0,this.$getWidth(),this.$getHeight())),r[31]&&(s=i.lineStyle(1,r[32]),s.drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1)),e&&e.length>0)for(var h=r[2],a=-1,l=e.length,c=0;l>c;c+=4){var d=e[c],u=e[c+1],p=e[c+2],f=e[c+3]||h;(0>a||a!=f)&&(a=f,s=i.lineStyle(2,f,1,t.CapsStyle.NONE)),s.moveTo(d,u),s.lineTo(d+p,u)}}if(i){var g=this.$getRenderBounds();i.x=g.x,i.y=g.y,i.width=g.width,i.height=g.height,t.Rectangle.release(g)}},i.prototype.setFocus=function(){this.type==t.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._removeStageText(),this.textNode&&this.textNode.clean()},i.prototype.$onAddToStage=function(i,r){e.prototype.$onAddToStage.call(this,i,r),this.addEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._addStageText()},i.prototype.$invalidateTextField=function(){var t=this;t.$renderDirty=!0,t.$TextField[18]=!0},i.prototype.$getRenderBounds=function(){var e=this.$getContentBounds(),i=t.Rectangle.create();i.copyFrom(e),this.$TextField[31]&&(i.width+=2,i.height+=2);var r=2*this.$TextField[27];return r>0&&(i.width+=2*r,i.height+=2*r),i.x-=r+2,i.y-=r+2,i.width=Math.ceil(i.width)+4,i.height=Math.ceil(i.height)+4,i},i.prototype.$measureContentBounds=function(t){this.$getLinesArr();var e=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],i=isNaN(this.$TextField[4])?this.$TextField[6]:this.$TextField[4];t.setTo(0,0,e,i)},i.prototype.$updateRenderNode=function(){if(this.$TextField[24]==t.TextFieldType.INPUT){if(this.inputUtils._updateProperties(),this.$isTyping)return void this.fillBackground()}else if(0==this.$TextField[3]){var e=this.graphicsNode;return void(e&&e.clear())}var i=this.drawText();this.fillBackground(i);var r=this.$getRenderBounds(),n=this.textNode;n.x=r.x,n.y=r.y,n.width=Math.ceil(r.width),n.height=Math.ceil(r.height),t.Rectangle.release(r)},Object.defineProperty(i.prototype,"textFlow",{get:function(){return this.textArr},set:function(t){this.isFlow=!0;var e="";null==t&&(t=[]);for(var i=0;i<t.length;i++){var r=t[i];e+=r.text}this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t))},enumerable:!0,configurable:!0}),i.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,r=t.length;r>i;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},i.prototype.setMiddleStyle=function(t){this.$TextField[18]=!0,this.textArr=t,this.$invalidateTextField()},Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.$getLinesArr(),this.$TextField[5]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.$getLinesArr(),this.$TextField[6]},enumerable:!0,configurable:!0}),i.prototype.appendText=function(t){this.appendElement({text:t})},i.prototype.appendElement=function(t){var e=this.$TextField[13]+t.text;this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.textArr.push(t),this.setMiddleStyle(this.textArr))},i.prototype.$getLinesArr=function(){var t=this.$TextField;return t[18]?(t[18]=!1,t[29]=1,this._bkText.content?(t[5]=this._bkText.width,t[6]=this._bkText.height):(t[5]=0,t[6]=0),this.linesArr):this.linesArr},i.prototype.drawText=function(){return[]},i.prototype.addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},i.prototype.removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},i.prototype.onTapHandler=function(t){},i.prototype._refitString=function(t,e){var i=t.toString(16),r="00000000";return r.substr(0,e-i.length)+i},i.prototype.$getRenderNode=function(){if(this._transformDirty||this.$matrixDirty){this._transformDirty=!1,this._bkText.content=this._bkText.content;var e=this.$getMatrix(),i=this._bkNode.transform.matrix,r=e.tx,n=e.ty,o=this.$anchorOffsetX,s=this.$anchorOffsetY-this._bkText.size.height;switch((0!==o||0!==s)&&(r-=e.a*o+e.c*s,n-=e.b*o+e.d*s),this._bkText.horizontalAlign){case 0:break;case 1:r-=.5*(this._bkText.size.width-this.$getWidth());break;case 2:r-=this._bkText.size.width-this.$getWidth()}switch(this.verticalAlign){case t.VerticalAlign.TOP:break;case t.VerticalAlign.MIDDLE:n+=.5*(this._bkText.size.height-this._bkText.height);break;case t.VerticalAlign.BOTTOM:n+=this._bkText.size.height-this._bkText.height}i.set(e.a,-e.b,-e.c,e.d,r,-n)}return this._bkNode},i.default_fontFamily="Arial",i.default_size=30,i.default_textColor=16777215,i}(t.BKDisplayObject));t.BKTextField=e,__reflect(e.prototype,"egret.BKTextField"),t.TextField=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.type=t.Sound.EFFECT,i}return __extends(i,e),i.prototype.load=function(t){this.url=t},i.prototype.play=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var r=new t.BKSoundChannel;return r.$loops=i,r.$startTime=e,r.$type=this.type,r.$url=this.url,r.$play(),r},i.prototype.close=function(){},i.MUSIC="music",i.EFFECT="effect",i}(t.EventDispatcher);t.BKSound=e,__reflect(e.prototype,"egret.BKSound",["egret.Sound"]),t.Sound=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.$play=function(){var e;switch(this.$type){case t.Sound.MUSIC:e=0;break;case t.Sound.EFFECT:e=1}var i=0===this.$loops?-1:this.$loops,r="GameRes://"+this.$url;this._bkAudio=new BK.Audio(e,r,i,0),this._bkAudio.startMusic()},i.prototype.stop=function(){this._bkAudio.stopMusic()},i}(t.EventDispatcher);t.BKSoundChannel=e,__reflect(e.prototype,"egret.BKSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.lastX=0,this.lastY=0,this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=0,this.lineWidth=0,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.includeLastPosition=!0;var e=t.lifecycle.stage;this.stageW=e.stageWidth,this.stageH=e.stageHeight,this._BKCanvas=new BK.Canvas(2*this.stageW,2*this.stageH),this._BKCanvas.position={x:-this.stageW,y:-this.stageH},this.offsetX=this.stageW,this.offsetY=this.stageH,this._BKCanvas.backgroundColor={r:0,g:0,b:0,a:0}}return e.prototype.$setTarget=function(t){this.targetDisplay&&(this.targetDisplay.$renderNode=null),t._bkNode.addChild(this._BKCanvas),this.targetDisplay=t},e.prototype.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},e.prototype.beginFill=function(t,e){void 0===e&&(e=1),t=+t||0,e=+e||0,this.isFillPath=!0;var i=this._refitString(t,6),r=parseInt(i.substring(0,2),16)/255,n=parseInt(i.substring(2,4),16)/255,o=parseInt(i.substring(4,6),16)/255;this._BKCanvas.fillColor={r:r,g:n,b:o,a:e}},e.prototype._refitString=function(t,e){var i=t.toString(16),r="00000000";return r.substr(0,e-i.length)+i},e.prototype.beginGradientFill=function(t,e,i,r,n){void 0===n&&(n=null)},e.prototype.endFill=function(){this.isFillPath&&(this._BKCanvas.fill(),this.isFillPath=!1),this.isStrokePath&&(this._BKCanvas.stroke(),this._BKCanvas.closePath(),this.isStrokePath=!1)},e.prototype.lineStyle=function(t,e,i,r,n,o,s,h,a){if(void 0===t&&(t=0/0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=!1),void 0===n&&(n="normal"),void 0===o&&(o=null),void 0===s&&(s=null),void 0===h&&(h=3),0>=t)this.isStrokePath=!1,this.lineWidth=0,this.setStrokeWidth(0);else{e=+e||0,i=+i||0,this.setStrokeWidth(t),this.lineWidth=t,this._BKCanvas.lineWidth=t,this.isStrokePath=!0;var l=this._refitString(e,6),c=parseInt(l.substring(0,2),16)/255,d=parseInt(l.substring(2,4),16)/255,u=parseInt(l.substring(4,6),16)/255;this._BKCanvas.strokeColor={r:c,g:d,b:u,a:i}}},e.prototype.drawRect=function(t,e,i,r){var n=+t+this.offsetX||0,o=-e+this.offsetY||0;i=+i||0,r=+r||0,this.extendBoundsByPoint(t+i,e+r),this.updatePosition(t,e),this.isFillPath&&this._BKCanvas.fillRect(n,o-r,i,r),this.isStrokePath&&this._BKCanvas.strokeRect(n,o-r,i,r)},e.prototype.drawRoundRect=function(t,e,i,r,n,o){},e.prototype.drawCircle=function(t,e,i){var r=+t+this.offsetX||0,n=-e+this.offsetY||0;i=+i||0,this._BKCanvas.drawCircle(r,n,i),this.isStrokePath&&this.isFillPath&&(this._BKCanvas.fill(),this._BKCanvas.drawCircle(r,n,i),this._BKCanvas.stroke()),this.extendBoundsByPoint(t-i-1,e-i-1),this.extendBoundsByPoint(t+i+2,e+i+2),this.updatePosition(t+i,e)},e.prototype.drawEllipse=function(t,e,i,r){var n=+t+this.offsetX||0,o=-e+this.offsetY||0;i=+i||0,r=+r||0,this._BKCanvas.drawEllipse(n,o,i,r),this.isStrokePath&&this.isFillPath&&(this._BKCanvas.fill(),this._BKCanvas.drawEllipse(n,o,i,r),this._BKCanvas.stroke()),this.extendBoundsByPoint(t-1,e-1),this.extendBoundsByPoint(t+i+2,e+r+2),this.updatePosition(t+i,e+.5*r)},e.prototype.moveTo=function(t,e){var i=t+this.offsetX||0,r=-e+this.offsetY||0;this._BKCanvas.moveTo(i,r)},e.prototype.lineTo=function(t,e){var i=t+this.offsetX||0,r=-e+this.offsetY||0;this._BKCanvas.lineTo(i,r),this.updatePosition(t,e)},e.prototype.curveTo=function(t,e,i,r){var n=this.offsetX+t||0,o=this.offsetY-e||0,s=this.offsetX+i||0,h=this.offsetY-r||0;this._BKCanvas.quadraticCurveTo(n,o,s,h),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,r),this.updatePosition(i,r)},e.prototype.cubicCurveTo=function(t,e,i,r,n,o){var s=this.offsetX+t||0,h=this.offsetY-e||0,a=this.offsetX+i||0,l=this.offsetY-r||0,c=this.offsetX+n||0,d=this.offsetY-o||0;this._BKCanvas.bezierCurveTo(s,h,a,l,c,d),this.extendBoundsByPoint(t,e),this.extendBoundsByPoint(i,r),this.extendBoundsByPoint(n,o),this.updatePosition(n,o)},e.prototype.drawArc=function(t,e,i,r,n,o){},e.prototype.arcBounds=function(t,e,i,r,n){},e.prototype.clear=function(){this.updatePosition(0,0),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this._BKCanvas.clearRect(0,0,2*this.stageW,2*this.stageH),this.isFillPath=!1,this.isStrokePath=!1},e.prototype.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},e.prototype.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},e.prototype.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},e.prototype.updateNodeBounds=function(){},e.prototype.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e)},e.prototype.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},e.prototype.$hitTest=function(t,e){return this._BKCanvas.hittest({x:t,y:e})?this.targetDisplay:null},e.prototype.$onRemoveFromStage=function(){},e}();t.BKGraphics=e,__reflect(e.prototype,"egret.BKGraphics"),t.Graphics=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$stageWidth=0,i.$stageHeight=0,i.$scaleMode=t.StageScaleMode.SHOW_ALL,i.$orientation=t.OrientationMode.AUTO,i.$maxTouches=99,i.$stage=i,i.$nestLevel=1,i}return __extends(i,e),Object.defineProperty(i.prototype,"frameRate",{get:function(){return t.ticker.$frameRate},set:function(e){t.ticker.$setFrameRate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),i.prototype.invalidate=function(){t.sys.$invalidateRenderFlag=!0},i.prototype.registerImplementation=function(e,i){t.registerImplementation(e,i)},i.prototype.getImplementation=function(e){return t.getImplementation(e)},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureScaleFactor",{get:function(){return t.$TextureScaleFactor},set:function(e){t.$TextureScaleFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dirtyRegionPolicy",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i}(t.BKDisplayObjectContainer);t.BKStage=e,__reflect(e.prototype,"egret.BKStage"),t.Stage=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(r){var n=e.call(this)||this;n.stage=new t.Stage,n._mainTicker=BK.Director.ticker,n._viewRect=new t.Rectangle,n._touch=new t.sys.TouchHandler(n.stage),n._displayList=[],i.instance=n,n._options=r,BK.Director.root.addChild(n.stage._bkNode),t.lifecycle.stage=n.stage,t.sys.$TempStage=n.stage,n.stage.$screen=n,n.stage.maxTouches=10,n.stage.frameRate=n._options.frameRate,n.stage.orientation=n._options.orientation,n.stage.scaleMode=n._options.scaleMode,n._mainTicker.add(function(){n._touchHandler(),t.ticker.update(),t.ticker.callLaters();for(var e=0,i=n._displayList;e<i.length;e++){var r=i[e];r.$getRenderNode()}},n),n.updateScreenSize(),n.updateMaxTouches();var o,s=n._options.entryClassName;if(s&&(o=t.getDefinitionByName(s)),o){var h=new o;h instanceof t.DisplayObject&&n.stage.addChild(h)}return n}return __extends(i,e),i.prototype._touchHandler=function(){var t=BK.TouchEvent.getTouchEvent();if(t&&0!==t.length){for(var e=0,i=t;e<i.length;e++){var r=i[e],n=r.id,o=(BK.Director.screenPixelSize,BK.Director.root.convertToNodeSpace(r)),s=o.x,h=-o.y;1===r.status?this._touch.onTouchEnd(s,h,n):2===r.status?this._touch.onTouchBegin(s,h,n):3===r.status&&this._touch.onTouchMove(s,h,n)}BK.TouchEvent.updateTouchStatus()}},i.prototype.updateScreenSize=function(){var e=BK.Director.screenPixelSize,i=e.width,r=e.height;t.Capabilities.$boundingClientWidth=i,t.Capabilities.$boundingClientHeight=r;var n=t.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,i,r,this._options.contentWidth,this._options.contentHeight),o=n.stageWidth,s=n.stageHeight,h=n.displayWidth,a=n.displayHeight,l=(r-a)/2,c=(i-h)/2;this.stage.$stageWidth=o,this.stage.$stageHeight=s,BK.Director.root.position={x:c,y:BK.Director.screenPixelSize.height-l},BK.Director.root.scale={x:h/o,y:a/s},this._viewRect.setTo(c,l,o,s),this.stage.dispatchEventWith(t.Event.RESIZE)},i.prototype.setContentSize=function(t,e){var i=this._options;i.contentWidth=t,i.contentHeight=e,this.updateScreenSize()},i.prototype.updateMaxTouches=function(){this._touch.$initMaxTouches()},i}(t.HashObject);t.BKPlayer=e,__reflect(e.prototype,"egret.BKPlayer",["egret.sys.Screen"])}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t._crossOrigin=null,t._hasCrossOriginSet=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"crossOrigin",{get:function(){return this._crossOrigin},set:function(t){this._hasCrossOriginSet=!0,this._crossOrigin=t},enumerable:!0,configurable:!0}),i.prototype.load=function(e){BK.FileUtil.isFileExist(e)?(this.data=new t.BitmapData(e),t.$callAsync(t.Event.dispatchEvent,t.Event,this,t.Event.COMPLETE)):t.$callAsync(t.Event.dispatchEvent,t.IOErrorEvent,this,t.IOErrorEvent.IO_ERROR)},i.crossOrigin=null,i}(t.EventDispatcher);t.BKImageLoader=e,__reflect(e.prototype,"egret.BKImageLoader",["egret.ImageLoader"]),t.ImageLoader=e}(egret||(egret={}));
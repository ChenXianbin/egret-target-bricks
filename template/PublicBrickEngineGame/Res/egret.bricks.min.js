var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i._position={x:0,y:0,z:0},i._scale={x:0,y:0,z:0},i._rotation={x:0,y:0,z:0},i._color={r:0,g:0,b:0,a:0},i._bkNode=e||new BK.Node,i}return __extends(e,t),e.prototype._refreshNodePropertices=function(){this._bkNode.position=this._position,this._bkNode.scale=this._scale,this._bkNode.rotation=this._rotation,this._bkNode.vertexColor=this._color},e.prototype.$hitTest=function(t,e){var i=this;if(!i.$visible)return null;var r=i.$getInvertedConcatenatedMatrix();if(0==r.a&&0==r.b&&0==r.c&&0==r.d)return null;var n=i.$getContentBounds(),o=r.a*t+r.c*e+r.tx,s=r.b*t+r.d*e+r.ty;if(n.contains(o,s)){if(!i.$children){var h=i.$scrollRect?i.$scrollRect:i.$maskRect;if(h&&!h.contains(o,s))return null;if(i.$mask&&!i.$mask.$hitTest(t,e))return null}return i}return null},e.prototype.$setX=function(t){var e=this;return e.$x==t?!1:(e.$x=t,e._position.x=t,e._bkNode.position=e._position,!0)},e.prototype.$setY=function(t){var e=this;return e.$y==t?!1:(e.$y=t,e._position.y=-t,e._bkNode.position=e._position,!0)},e.prototype.$setScaleX=function(e){t.prototype.$setScaleX.call(this,e),this._scale.x=e,this._bkNode.scale=this._scale},e.prototype.$setScaleY=function(e){t.prototype.$setScaleY.call(this,e),this._scale.y=e,this._bkNode.scale=this._scale},e.prototype.$setRotation=function(e){t.prototype.$setRotation.call(this,e),this._rotation.z=e,this._bkNode.rotation=this._rotation},e.prototype.$setVisible=function(e){t.prototype.$setVisible.call(this,e),this._bkNode.hidden=!e},e.prototype.$setAlpha=function(e){t.prototype.$setAlpha.call(this,e),this._color.a=e,this._bkNode.vertexColor=this._color},e}(t.DisplayObject);t.BKDisplayObject=e,__reflect(e.prototype,"egret.BKDisplayObject"),t.DisplayObject=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.$touchChildren=!0,t.$children=[],t}return __extends(i,e),Object.defineProperty(i.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},i.prototype.addChildAt=function(t,e){return e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},i.prototype.$doAddChild=function(e,i,r){void 0===r&&(r=!0);var n=this,o=e.$parent;if(o==n)return n.doSetChildIndex(e,i),e;o&&o.removeChild(e),n.$children.splice(i,0,e),e.$setParent(n);var s=n.$stage;if(s&&e.$onAddToStage(s,n.$nestLevel+1),r&&e.dispatchEventWith(t.Event.ADDED,!0),s)for(var h=t.DisplayObjectContainer.$EVENT_ADD_TO_STAGE_LIST;h.length;){var a=h.shift();a.$stage&&r&&a.dispatchEventWith(t.Event.ADDED_TO_STAGE)}this._bkNode.addChild(e._bkNode,i);for(var c=0,p=this.$children.length;p>c;c++)this.$children[c]._bkNode.zOrder=-c;return this.$childAdded(e,i),e},i.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},i.prototype.getChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$children[t]:null},i.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},i.prototype.getChildByName=function(t){for(var e,i=this.$children,r=i.length,n=0;r>n;n++)if(e=i[n],e.name==t)return e;return null},i.prototype.removeChild=function(t){var e=this.$children.indexOf(t);return e>=0?this.$doRemoveChild(e):null},i.prototype.removeChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$doRemoveChild(t):null},i.prototype.$doRemoveChild=function(e,i){void 0===i&&(i=!0),e=0|+e;var r=this.$children,n=r[e];if(this.$childRemoved(n,e),i&&n.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){n.$onRemoveFromStage();for(var o=t.DisplayObjectContainer.$EVENT_REMOVE_FROM_STAGE_LIST;o.length>0;){var s=o.shift();i&&s.$hasAddToStage&&(s.$hasAddToStage=!1,s.dispatchEventWith(t.Event.REMOVED_FROM_STAGE)),s.$hasAddToStage=!1,s.$stage=null}}this.$displayList||this.$parentDisplayList;n.$setParent(null);var h=r.indexOf(n);return-1!=h&&r.splice(h,1),this._bkNode.removeChild(n._bkNode),n},i.prototype.setChildIndex=function(t,e){e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},i.prototype.doSetChildIndex=function(t,e){var i=this.$children.indexOf(t);if(i!=e){this.$childRemoved(t,i),this.$children.splice(i,1),this.$children.splice(e,0,t),this.$childAdded(t,e),this._bkNode.removeChild(t._bkNode),this._bkNode.addChild(t._bkNode,e);for(var r=0,n=this.$children.length;n>r;r++)this.$children[r]._bkNode.zOrder=-r}},i.prototype.swapChildrenAt=function(t,e){t=0|+t,e=0|+e,t>=0&&t<this.$children.length&&e>=0&&e<this.$children.length&&this.doSwapChildrenAt(t,e)},i.prototype.swapChildren=function(t,e){var i=this.$children.indexOf(t),r=this.$children.indexOf(e);-1==i||-1==r||this.doSwapChildrenAt(i,r)},i.prototype.doSwapChildrenAt=function(t,e){if(t>e){var i=e;e=t,t=i}else if(t==e)return;var r=this.$children,n=r[t],o=r[e];this.$childRemoved(n,t),this.$childRemoved(o,e),r[t]=o,r[e]=n,this.$childAdded(o,t),this.$childAdded(n,e),o._bkNode.zOrder=-t,n._bkNode.zOrder=-e},i.prototype.removeChildren=function(){for(var t=this.$children,e=t.length-1;e>=0;e--)this.$doRemoveChild(e)},i.prototype.$childAdded=function(t,e){},i.prototype.$childRemoved=function(t,e){},i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var r=this.$children,n=r.length;i++;for(var o=0;n>o;o++){var s=this.$children[o];s.$onAddToStage(t,i)}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,r=0;i>r;r++){var n=t[r];n.$onRemoveFromStage()}},i.prototype.$measureChildBounds=function(e){var i=this.$children,r=i.length;if(0!=r){for(var n=0,o=0,s=0,h=0,a=!1,c=-1;r>c;c++){var p=-1==c?e:i[c].$getTransformedBounds(this,t.$TempRectangle);p.isEmpty()||(a?(n=Math.min(n,p.x),o=Math.max(o,p.x+p.width),s=Math.min(s,p.y),h=Math.max(h,p.y+p.height)):(a=!0,n=p.x,o=n+p.width,s=p.y,h=s+p.height))}e.setTo(n,s,o-n,h-s)}},Object.defineProperty(i.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),i.prototype.$getTouchChildren=function(){return this.$touchChildren},i.prototype.$setTouchChildren=function(t){return this.$touchChildren==t?!1:(this.$touchChildren=t,!0)},i.prototype.$hitTest=function(t,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*t+r.c*i+r.tx,o=r.b*t+r.d*i+r.ty,s=this.$scrollRect?this.$scrollRect:this.$maskRect;if(s&&!s.contains(n,o))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var h=this.$children,a=!1,c=null,p=h.length-1;p>=0;p--){var u=h[p];if(!u.$maskedObject&&(c=u.$hitTest(t,i))){if(a=!0,c.$touchEnabled)break;c=null}}return c?this.$touchChildren?c:this:a?this:e.prototype.$hitTest.call(this,t,i)},i.$EVENT_ADD_TO_STAGE_LIST=[],i.$EVENT_REMOVE_FROM_STAGE_LIST=[],i}(t.BKDisplayObject);t.BKDisplayObjectContainer=e,__reflect(e.prototype,"egret.BKDisplayObjectContainer"),t.DisplayObjectContainer=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);return r==this&&(r=null),r},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.BKDisplayObject);t.BKShape=e,__reflect(e.prototype,"egret.BKShape"),t.Shape=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._bkTexture=null,t.disposeBitmapData=!0,t.$bitmapX=0,t.$bitmapY=0,t.$bitmapWidth=0,t.$bitmapHeight=0,t.$offsetX=0,t.$offsetY=0,t.$textureWidth=0,t.$textureHeight=0,t.$sourceWidth=0,t.$sourceHeight=0,t.$bitmapData=null,t.$rotated=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"textureWidth",{get:function(){return this.$getTextureWidth()},enumerable:!0,configurable:!0}),i.prototype.$getTextureWidth=function(){return this.$textureWidth},Object.defineProperty(i.prototype,"textureHeight",{get:function(){return this.$getTextureHeight()},enumerable:!0,configurable:!0}),i.prototype.$getTextureHeight=function(){return this.$textureHeight},i.prototype.$getScaleBitmapWidth=function(){return this.$bitmapWidth*t.$TextureScaleFactor},i.prototype.$getScaleBitmapHeight=function(){return this.$bitmapHeight*t.$TextureScaleFactor},Object.defineProperty(i.prototype,"bitmapData",{get:function(){return this.$bitmapData},set:function(t){this._setBitmapData(t)},enumerable:!0,configurable:!0}),i.prototype._setBitmapData=function(e){this.$bitmapData=e;var i=t.$TextureScaleFactor,r=e.width*i,n=e.height*i;this.$initData(0,0,r,n,0,0,r,n,e.width,e.height)},i.prototype.$initData=function(e,i,r,n,o,s,h,a,c,p,u){void 0===u&&(u=!1);var l=t.$TextureScaleFactor;this.$bitmapX=e/l,this.$bitmapY=i/l,this.$bitmapWidth=r/l,this.$bitmapHeight=n/l,this.$offsetX=o,this.$offsetY=s,this.$textureWidth=h,this.$textureHeight=a,this.$sourceWidth=c,this.$sourceHeight=p,this.$rotated=u,this._bkTexture=new BK.Texture(this.bitmapData.source)},i.prototype.getPixel32=function(t,e){throw new Error},i.prototype.getPixels=function(t,e,i,r){throw void 0===i&&(i=1),void 0===r&&(r=1),new Error},i.prototype.toDataURL=function(t,e,i){throw new Error},i.prototype.saveToFile=function(t,e,i){throw new Error},i}(t.HashObject);t.BKTexture=e,__reflect(e.prototype,"egret.BKTexture"),t.Texture=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._url="",t._method="",t.urlData={},t.responseHeader="",t}return __extends(i,e),Object.defineProperty(i.prototype,"responseType",{get:function(){return this._responseType},set:function(t){this._responseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"response",{get:function(){return this._response},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(t){this._withCredentials=t},enumerable:!0,configurable:!0}),i.prototype.open=function(t,e){void 0===e&&(e="GET"),this._url=t,this._method=e},i.prototype.send=function(e){var i=this;if(i.isNetUrl(i._url))this._bkHttpRequest=new BK.HttpUtil(this._url),this._bkHttpRequest.setHttpMethod(this._method),this._bkHttpRequest.setHttpCookie(e),this._bkHttpRequest.requestAsync(function(e,r){if(200===Number(r)){var n=void 0;i._responseType===t.HttpResponseType.ARRAY_BUFFER||(n=e.readAsString()||""),i._response=n,t.$callAsync(t.Event.dispatchEvent,t.Event,i,t.Event.COMPLETE)}else t.$warn(1019,r),t.Event.dispatchEvent(i,t.IOErrorEvent.IO_ERROR)});else if(BK.FileUtil.isFileExist(i._url))if(i._responseType===t.HttpResponseType.ARRAY_BUFFER);else{var r=BK.FileUtil.readFile(i._url);i._response=r.readAsString(),t.$callAsync(t.Event.dispatchEvent,t.Event,i,t.Event.COMPLETE)}else;},i.prototype.isNetUrl=function(t){return-1!=t.indexOf("http://")||-1!=t.indexOf("HTTP://")||-1!=t.indexOf("https://")||-1!=t.indexOf("HTTPS://")},i.prototype.abort=function(){},i.prototype.onResponseHeader=function(t){this.responseHeader="";var e=JSON.parse(t);for(var i in e)this.responseHeader+=i+": "+e[i]+"\r\n"},i.prototype.getAllResponseHeaders=function(){return this.responseHeader},i.prototype.setRequestHeader=function(t,e){this.headerObj||(this.headerObj={}),this.headerObj[t]=e},i.prototype.getResponseHeader=function(t){return""},i}(t.EventDispatcher);t.BKHttpRequest=e,__reflect(e.prototype,"egret.BKHttpRequest",["egret.HttpRequest"]),t.HttpRequest=e}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;i.width=0,i.height=0,i.source="";var r=new BK.Texture(e);return i.width=r.size.width,i.height=r.size.height,i.source=e,i}return __extends(e,t),e}(t.HashObject);t.BKBitmapData=e,__reflect(e.prototype,"egret.BKBitmapData"),t.BitmapData=e}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this,new BK.Sprite(0,0,{},0,1,1,1))||this;return i.$explicitBitmapWidth=0/0,i.$explicitBitmapHeight=0/0,i._size={width:0,height:0},i._bitmapData=null,i._bkSprite=i._bkNode,i._bkSprite.anchor={x:0,y:1},i.texture=e,i}return __extends(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this._texture?(this._bkSprite.setTexture(t._bkTexture),this._size.width=isNaN(this.$explicitBitmapWidth)?this._texture.$getTextureWidth():this.$explicitBitmapWidth,this._size.height=isNaN(this.$explicitBitmapHeight)?this._texture.$getTextureHeight():this.$explicitBitmapHeight,this._bkSprite.size=this._size,this._bkSprite.adjustTexturePosition(this._texture.$bitmapX,this._texture.$bitmapY,this._texture.$bitmapWidth,this._texture.$bitmapHeight,this._texture.$rotated)):this._bkSprite.setTexture({}))},enumerable:!0,configurable:!0}),e.prototype.$setWidth=function(t){var e=this;return 0>t||t==e.$explicitBitmapWidth?!1:(e.$explicitBitmapWidth=t,this._size.width=t,this._bkSprite.size=this._size,!0)},e.prototype.$setHeight=function(t){var e=this;return 0>t||t==e.$explicitBitmapHeight?!1:(e.$explicitBitmapHeight=t,this._size.height=t,this._bkSprite.size=this._size,!0)},e.prototype.$getWidth=function(){return isNaN(this.$explicitBitmapWidth)?this.$getContentBounds().width:this.$explicitBitmapWidth},e.prototype.$getHeight=function(){return isNaN(this.$explicitBitmapHeight)?this.$getContentBounds().height:this.$explicitBitmapHeight},e.prototype.$measureContentBounds=function(t){if(this._texture){var e=isNaN(this.$explicitBitmapWidth)?this._texture.$getTextureWidth():this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?this._texture.$getTextureHeight():this.$explicitBitmapHeight;t.setTo(0,0,e,i)}else{var e=isNaN(this.$explicitBitmapWidth)?0:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?0:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}},e.prototype.$setAnchorOffsetX=function(e){t.prototype.$setAnchorOffsetX.call(this,e);var i=e/this._size.width;this._bkSprite.anchor={x:i,y:this._bkSprite.anchor.y}},e.prototype.$setAnchorOffsetY=function(e){t.prototype.$setAnchorOffsetY.call(this,e);var i=1-e/this._size.height;this._bkSprite.anchor={x:this._bkSprite.anchor.x,y:i}},e}(t.BKDisplayObject);t.BKBitmap=e,__reflect(e.prototype,"egret.BKBitmap"),t.Bitmap=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(e,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*e+r.c*i+r.tx,o=r.b*e+r.d*i+r.ty,s=this.$scrollRect?this.$scrollRect:this.$maskRect;if(s&&!s.contains(n,o))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null;for(var h=this.$children,a=!1,c=null,p=h.length-1;p>=0;p--){var u=h[p];if(!u.$maskedObject&&(c=u.$hitTest(e,i))){if(a=!0,c.$touchEnabled)break;c=null}}return c?this.$touchChildren?c:this:a?this:(c=t.DisplayObject.prototype.$hitTest.call(this,e,i),c&&(c=this.$graphics.$hitTest(e,i)),c)},i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.BKDisplayObjectContainer);t.BKSprite=e,__reflect(e.prototype,"egret.BKSprite"),t.Sprite=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this,new BK.Text(void 0,""))||this;return t._size={width:100,height:200},t._bkText=t._bkNode,t._bkText.anchor={x:0,y:1},t._bkText.bold=0,t._bkText.italic=!1,t._bkText.maxSize={width:2048,height:2048},t._bkText.shadowColor=0,t._bkText.shadowOffset={x:0,y:0},t._bkText.shadowRadius=0,t._bkText.strokeColor=0,t._bkText.strokeSize=0,t}return __extends(i,e),i.prototype._refitString=function(t,e){var i=t.toString(16),r="00000000";return r.substr(0,e-i.length)+i},Object.defineProperty(i.prototype,"size",{get:function(){return this._bkText.fontSize},set:function(t){this._bkText.fontSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bold",{get:function(){return this._bkText.bold>0},set:function(t){this._bkText.bold=t?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"italic",{get:function(){return this._bkText.italic},set:function(t){this._bkText.italic=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textAlign",{get:function(){switch(this._bkText.horizontalAlign){case 0:return t.HorizontalAlign.LEFT;case 1:return t.HorizontalAlign.CENTER;case 2:return t.HorizontalAlign.RIGHT}},set:function(e){switch(e){case t.HorizontalAlign.LEFT:this._bkText.horizontalAlign=0;break;case t.HorizontalAlign.CENTER:this._bkText.horizontalAlign=1;break;case t.HorizontalAlign.RIGHT:this._bkText.horizontalAlign=2}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._bkText.content},set:function(t){this._bkText.content=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textColor",{get:function(){var t=this._refitString(this._bkText.fontColor,8),e=t.substring(2,8);return parseInt(e,16)},set:function(t){var e=this._refitString(t,6),i=this._refitString(this._bkText.fontColor,8),r=i.substring(0,2)+e,n=parseInt(r,16);this._bkText.fontColor=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strokeColor",{get:function(){var t=this._refitString(this._bkText.strokeColor,8),e=t.substring(2,8);return parseInt(e)},set:function(t){var e=this._refitString(t,6),i=this._refitString(this._bkText.strokeColor,8),r=i.substring(0,2)+e,n=parseInt(r,16);this._bkText.fontColor=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._bkText.strokeSize},set:function(t){this._bkText.strokeSize=t},enumerable:!0,configurable:!0}),i.prototype.$setWidth=function(t){e.prototype.$setWidth.call(this,t),this._size.width=t,this._bkText.style.width=this._size.width},i.prototype.$setHeight=function(t){e.prototype.$setHeight.call(this,t),this._size.height=t,this._bkText.style.height=this._size.height},i.prototype.$setAnchorOffsetX=function(t){e.prototype.$setAnchorOffsetX.call(this,t);var i=t/this._size.width;this._bkText.anchor={x:i,y:this._bkText.anchor.y}},i.prototype.$setAnchorOffsetY=function(t){e.prototype.$setAnchorOffsetY.call(this,t);var i=1-t/this._size.height;this._bkText.anchor={x:this._bkText.anchor.x,y:i}},Object.defineProperty(i.prototype,"textWidth",{get:function(){return this._bkText.width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this._bkText.height},enumerable:!0,configurable:!0}),i}(t.BKDisplayObject);t.BKTextField=e,__reflect(e.prototype,"egret.BKTextField"),t.TextField=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$stageWidth=0,i.$stageHeight=0,i.$scaleMode=t.StageScaleMode.SHOW_ALL,i.$orientation=t.OrientationMode.AUTO,i.$maxTouches=99,i.$stage=i,i.$nestLevel=1,i}return __extends(i,e),Object.defineProperty(i.prototype,"frameRate",{get:function(){return t.ticker.$frameRate},set:function(e){t.ticker.$setFrameRate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),i.prototype.invalidate=function(){t.sys.$invalidateRenderFlag=!0},i.prototype.registerImplementation=function(e,i){t.registerImplementation(e,i)},i.prototype.getImplementation=function(e){return t.getImplementation(e)},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureScaleFactor",{get:function(){return t.$TextureScaleFactor},set:function(e){t.$TextureScaleFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dirtyRegionPolicy",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i}(t.BKDisplayObjectContainer);t.BKStage=e,__reflect(e.prototype,"egret.BKStage"),t.Stage=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){var r=e.call(this)||this;r.stage=new t.Stage,r._mainTicker=BK.Director.ticker,r._viewRect=new t.Rectangle,r._touch=new t.sys.TouchHandler(r.stage),r._options=i,BK.Director.root.addChild(r.stage._bkNode),t.lifecycle.stage=r.stage,t.sys.$TempStage=r.stage,r.stage.$screen=r,r.stage.maxTouches=10,r.stage.frameRate=r._options.frameRate,r.stage.orientation=r._options.orientation,r.stage.scaleMode=r._options.scaleMode;var n,o=r._options.entryClassName;if(o&&(n=t.getDefinitionByName(o)),n){var s=new n;s instanceof t.DisplayObject&&r.stage.addChild(s)}return r._mainTicker.add(function(){r._touchHandler(),t.ticker.update()},r),r.updateScreenSize(),r.updateMaxTouches(),r}return __extends(i,e),i.prototype._touchHandler=function(){var t=BK.TouchEvent.getTouchEvent();if(t&&0!==t.length){for(var e=0,i=t;e<i.length;e++){var r=i[e],n=r.id,o=(BK.Director.screenPixelSize,BK.Director.root.convertToNodeSpace(r)),s=o.x,h=-o.y;1===r.status?this._touch.onTouchEnd(s,h,n):2===r.status?this._touch.onTouchBegin(s,h,n):3===r.status&&this._touch.onTouchMove(s,h,n)}BK.TouchEvent.updateTouchStatus()}},i.prototype.updateScreenSize=function(){var e=BK.Director.screenPixelSize,i=e.width,r=e.height;t.Capabilities.$boundingClientWidth=i,t.Capabilities.$boundingClientHeight=r;var n=t.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,i,r,this._options.contentWidth,this._options.contentHeight),o=n.stageWidth,s=n.stageHeight,h=n.displayWidth,a=n.displayHeight,c=(r-a)/2,p=(i-h)/2;this.stage.$stageWidth=o,this.stage.$stageHeight=s,BK.Director.root.position={x:p,y:BK.Director.screenPixelSize.height-c},BK.Director.root.scale={x:h/o,y:a/s},this._viewRect.setTo(p,c,o,s),this.stage.dispatchEventWith(t.Event.RESIZE)},i.prototype.setContentSize=function(t,e){var i=this._options;i.contentWidth=t,i.contentHeight=e,this.updateScreenSize()},i.prototype.updateMaxTouches=function(){this._touch.$initMaxTouches()},i}(t.HashObject);t.BKPlayer=e,__reflect(e.prototype,"egret.BKPlayer",["egret.sys.Screen"])}(egret||(egret={})),console.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i="";if(t)for(var r=0,n=t;r<n.length;r++){var o=n[r];i+=o}BK.Script.log(0,0,i)},this.setTimeout=this.setTimeout||function(){};var egret;!function(t){function e(t,e,i){BK.Director.ticker.setTimeout(t,i,e)}function i(t){BK.Director.ticker.removeTimeout(t)}function r(e){o||(o=!0,e||(e={}),e.screenAdapter?t.sys.screenAdapter=e.screenAdapter:t.sys.screenAdapter||(t.sys.screenAdapter=new t.sys.DefaultScreenAdapter),n=new t.BKPlayer(e))}t.getTimer=function(){return Math.round(1e3*BK.Time.timestamp)},t.setTimeout=e,t.clearTimeout=i;var n,o=!1;t.runEgret=r}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t._crossOrigin=null,t._hasCrossOriginSet=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"crossOrigin",{get:function(){return this._crossOrigin},set:function(t){this._hasCrossOriginSet=!0,this._crossOrigin=t},enumerable:!0,configurable:!0}),i.prototype.load=function(e){this.data=new t.BitmapData(e),t.$callAsync(t.Event.dispatchEvent,t.Event,this,t.Event.COMPLETE)},i.crossOrigin=null,i}(t.EventDispatcher);t.BKImageLoader=e,__reflect(e.prototype,"egret.BKImageLoader",["egret.ImageLoader"]),t.ImageLoader=e}(egret||(egret={}));
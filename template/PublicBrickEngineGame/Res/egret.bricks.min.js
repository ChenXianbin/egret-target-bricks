var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},egret;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this)||this;return i._transformDirty=!0,i._colorDirty=0,i._color={r:1,g:1,b:1,a:1},i._bkNode=t||new BK.Node,i}return __extends(i,e),i.prototype._replaceNode=function(t){this._transformDirty=!0,t.vertexColor=this._color,t.hidden=!this.visible,this._bkNode.parent&&(this._bkNode.parent.addChild(t,this.parent.getChildIndex(this)),this._bkNode.parent.removeChild(this._bkNode)),t.zOrder=this._bkNode.zOrder,this._bkNode=t},i.prototype._updateColor=function(){var t=this.$parent;t?2===this._colorDirty||0!==t._colorDirty?(this._colorDirty=1,this._color.a=t._color.a*this.$alpha,this._bkNode.vertexColor=this._color):1===this._colorDirty&&(this._colorDirty=0):2===this._colorDirty?(this._colorDirty=1,this._color.a=this.$alpha,this._bkNode.vertexColor=this._color):1===this._colorDirty&&(this._colorDirty=0)},i.prototype.$setVisible=function(t){e.prototype.$setVisible.call(this,t),this._bkNode.hidden=!t},i.prototype.$setAlpha=function(t){e.prototype.$setAlpha.call(this,t),this._colorDirty=2},Object.defineProperty(i.prototype,"blendMode",{set:function(e){var i=this,r=t.sys.blendModeToNumber(e);switch(i.$blendMode=r,e){case t.BlendMode.NORMAL:this._bkNode.blendMode=1;break;case t.BlendMode.ADD:this._bkNode.blendMode=0;break;case t.BlendMode.ERASE:}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"mask",{set:function(e){var i=this;if(e!==i){if(!(this instanceof t.BKBitmap))return void console.log("QQ 玩一玩不支持该种类型的影片剪辑被遮罩，只有 Bitmap 类型可以被遮罩，或不使用遮罩。");if(e)if(e instanceof t.BKBitmap){if(e==i.$mask)return;e.$maskedObject&&(e.$maskedObject.mask=null),e.$maskedObject=i,i.$mask=e;var r=new BK.ClipNode(e._bkNode);r.zOrder=this._bkNode.zOrder,this._bkNode.parent&&(this._bkNode.parent.addChild(r,this.parent.getChildIndex(this)),this._bkNode.parent.removeChild(this._bkNode)),r.addChild(this._bkNode)}else console.log("QQ 玩一玩不支持该种类型的遮罩，请使用 Bitmap 遮罩，或不使用遮罩。");else if(i.$mask,i.mask){var r=this._bkNode.parent;r&&r.parent&&(this._bkNode.zOrder=r.zOrder,r.parent.addChild(this._bkNode,this.parent.getChildIndex(this)),r.parent.removeChild(r)),i.$mask=null}}},enumerable:!0,configurable:!0}),i.prototype.$setX=function(t){var e=this;return e.$x==t?!1:(e.$x=t,this._transformDirty=!0,!0)},i.prototype.$setY=function(t){var e=this;return e.$y==t?!1:(e.$y=t,this._transformDirty=!0,!0)},i.prototype.$setMatrix=function(t,i){void 0===i&&(i=!0),e.prototype.$setMatrix.call(this,t,i),this._transformDirty=!0},i.prototype.$hitTest=function(t,e){var i=this;if(!i.$visible)return null;var r=i.$getInvertedConcatenatedMatrix();if(0==r.a&&0==r.b&&0==r.c&&0==r.d)return null;var n=i.$getContentBounds(),o=r.a*t+r.c*e+r.tx,s=r.b*t+r.d*e+r.ty;if(n.contains(o,s)){if(!i.$children){var h=i.$scrollRect?i.$scrollRect:i.$maskRect;if(h&&!h.contains(o,s))return null;if(i.$mask&&!i.$mask.$hitTest(t,e))return null}return i}return null},i.prototype.$getRenderNode=function(){if(this._updateColor(),this._transformDirty||this.$matrixDirty){this._transformDirty=!1;var t=this.$getMatrix(),e=this._bkNode.transform.matrix,i=t.tx,r=t.ty,n=this.$anchorOffsetX,o=this.$anchorOffsetY;(0!==n||0!==o)&&(i-=t.a*n+t.c*o,r-=t.b*n+t.d*o),e.set(t.a,-t.b,-t.c,t.d,i,-r)}return this._bkNode},i.prototype.$onAddToStage=function(i,r){e.prototype.$onAddToStage.call(this,i,r);var n=t.BKPlayer.instance._displayList.indexOf(this);0>n&&t.BKPlayer.instance._displayList.push(this)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);var i=t.BKPlayer.instance._displayList.indexOf(this);i>=0&&t.BKPlayer.instance._displayList.splice(i,1)},i}(t.DisplayObject);t.BKDisplayObject=e,__reflect(e.prototype,"egret.BKDisplayObject"),t.DisplayObject=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this,new BK.ClipRectNode(0,-2048,2048,2048))||this;return t.$touchChildren=!0,t._bkClipRectNode=t._bkNode,t._bkClipRectNode.enableClip=!1,t.$children=[],t}return __extends(i,e),Object.defineProperty(i.prototype,"numChildren",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},i.prototype.addChildAt=function(t,e){return e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},i.prototype.$doAddChild=function(e,i,r){void 0===r&&(r=!0);var n=this,o=e.$parent;if(o==n)return n.doSetChildIndex(e,i),e;o&&o.removeChild(e),n.$children.splice(i,0,e),e.$setParent(n);var s=n.$stage;if(s&&e.$onAddToStage(s,n.$nestLevel+1),r&&e.dispatchEventWith(t.Event.ADDED,!0),s)for(var h=t.DisplayObjectContainer.$EVENT_ADD_TO_STAGE_LIST;h.length;){var a=h.shift();a.$stage&&r&&a.dispatchEventWith(t.Event.ADDED_TO_STAGE)}var l=e._bkNode;l.parent?this._bkNode.addChild(l.parent,i):this._bkNode.addChild(l,i);for(var d=0,u=this.$children.length;u>d;d++){var c=this.$children[d]._bkNode,p=c.parent;p&&p.parent===this._bkNode?p.zOrder=-d:c.zOrder=-d}return this.$childAdded(e,i),e},i.prototype.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},i.prototype.getChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$children[t]:null},i.prototype.getChildIndex=function(t){return this.$children.indexOf(t)},i.prototype.getChildByName=function(t){for(var e,i=this.$children,r=i.length,n=0;r>n;n++)if(e=i[n],e.name==t)return e;return null},i.prototype.removeChild=function(t){var e=this.$children.indexOf(t);return e>=0?this.$doRemoveChild(e):null},i.prototype.removeChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$doRemoveChild(t):null},i.prototype.$doRemoveChild=function(e,i){void 0===i&&(i=!0),e=0|+e;var r=this.$children,n=r[e];if(this.$childRemoved(n,e),i&&n.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){n.$onRemoveFromStage();for(var o=t.DisplayObjectContainer.$EVENT_REMOVE_FROM_STAGE_LIST;o.length>0;){var s=o.shift();i&&s.$hasAddToStage&&(s.$hasAddToStage=!1,s.dispatchEventWith(t.Event.REMOVED_FROM_STAGE)),s.$hasAddToStage=!1,s.$stage=null}}this.$displayList||this.$parentDisplayList;n.$setParent(null);var h=r.indexOf(n);-1!=h&&r.splice(h,1);var a=n._bkNode;return a.parent&&a.parent.removeChild(a),n},i.prototype.setChildIndex=function(t,e){e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},i.prototype.doSetChildIndex=function(t,e){var i=this.$children.indexOf(t);if(i!=e){this.$childRemoved(t,i),this.$children.splice(i,1),this.$children.splice(e,0,t),this.$childAdded(t,e);var r=t._bkNode,n=r.parent;n&&(n.removeChild(r),n.addChild(r,e));for(var o=0,s=this.$children.length;s>o;o++){var h=this.$children[o]._bkNode,a=h.parent;a&&a.parent===this._bkNode?a.zOrder=-o:h.zOrder=-o}}},i.prototype.swapChildrenAt=function(t,e){t=0|+t,e=0|+e,t>=0&&t<this.$children.length&&e>=0&&e<this.$children.length&&this.doSwapChildrenAt(t,e)},i.prototype.swapChildren=function(t,e){var i=this.$children.indexOf(t),r=this.$children.indexOf(e);-1==i||-1==r||this.doSwapChildrenAt(i,r)},i.prototype.doSwapChildrenAt=function(t,e){if(t>e){var i=e;e=t,t=i}else if(t==e)return;var r=this.$children,n=r[t],o=r[e];this.$childRemoved(n,t),this.$childRemoved(o,e),r[t]=o,r[e]=n,this.$childAdded(o,t),this.$childAdded(n,e);var s=n._bkNode,h=o._bkNode;s.parent===this._bkNode?s.zOrder=-e:s.parent.zOrder=-e,h.parent===this._bkNode?h.zOrder=-t:h.parent.zOrder=-t},i.prototype.removeChildren=function(){for(var t=this.$children,e=t.length-1;e>=0;e--)this.$doRemoveChild(e)},i.prototype.$childAdded=function(t,e){},i.prototype.$childRemoved=function(t,e){},i.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var r=this.$children,n=r.length;i++;for(var o=0;n>o;o++){var s=this.$children[o];s.$onAddToStage(t,i)}},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,r=0;i>r;r++){var n=t[r];n.$onRemoveFromStage()}},i.prototype.$measureChildBounds=function(e){var i=this.$children,r=i.length;if(0!=r){for(var n=0,o=0,s=0,h=0,a=!1,l=-1;r>l;l++){var d=-1==l?e:i[l].$getTransformedBounds(this,t.$TempRectangle);d.isEmpty()||(a?(n=Math.min(n,d.x),o=Math.max(o,d.x+d.width),s=Math.min(s,d.y),h=Math.max(h,d.y+d.height)):(a=!0,n=d.x,o=n+d.width,s=d.y,h=s+d.height))}e.setTo(n,s,o-n,h-s)}},Object.defineProperty(i.prototype,"touchChildren",{get:function(){return this.$getTouchChildren()},set:function(t){this.$setTouchChildren(!!t)},enumerable:!0,configurable:!0}),i.prototype.$getTouchChildren=function(){return this.$touchChildren},i.prototype.$setTouchChildren=function(t){return this.$touchChildren==t?!1:(this.$touchChildren=t,!0)},i.prototype.$hitTest=function(t,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*t+r.c*i+r.tx,o=r.b*t+r.d*i+r.ty,s=this.$scrollRect?this.$scrollRect:this.$maskRect;if(s&&!s.contains(n,o))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var h=this.$children,a=!1,l=null,d=h.length-1;d>=0;d--){var u=h[d];if(!u.$maskedObject&&(l=u.$hitTest(t,i))){if(a=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:a?this:e.prototype.$hitTest.call(this,t,i)},Object.defineProperty(i.prototype,"scrollRect",{set:function(e){var i=this;(e||i.$scrollRect)&&(this._transformDirty=!0,e?(i.$scrollRect||(i.$scrollRect=new t.Rectangle,this._bkClipRectNode.enableClip=!0),i.$scrollRect.copyFrom(e),this._bkClipRectNode.clipRegion={x:i.$scrollRect.x,y:-i.$scrollRect.y-i.$scrollRect.height,width:i.$scrollRect.width,height:i.$scrollRect.height}):(i.$scrollRect=null,this._bkClipRectNode.enableClip=!1))},enumerable:!0,configurable:!0}),i.prototype.$getRenderNode=function(){if(this._updateColor(),this._transformDirty||this.$matrixDirty){this._transformDirty=!1;var t=this.$getMatrix(),e=this._bkNode.transform.matrix,i=t.tx,r=t.ty,n=this.$anchorOffsetX,o=this.$anchorOffsetY;(0!==n||0!==o)&&(i-=t.a*n+t.c*o,r-=t.b*n+t.d*o),this.$scrollRect&&(i-=this.$scrollRect.x,r-=this.$scrollRect.y),e.set(t.a,-t.b,-t.c,t.d,i,-r)}return this._bkNode},i.$EVENT_ADD_TO_STAGE_LIST=[],i.$EVENT_REMOVE_FROM_STAGE_LIST=[],i}(t.BKDisplayObject);t.BKDisplayObjectContainer=e,__reflect(e.prototype,"egret.BKDisplayObjectContainer"),t.DisplayObjectContainer=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$hitTest=function(t,i){var r=e.prototype.$hitTest.call(this,t,i);return r==this&&(r=this.$graphics.$hitTest(t,i)),r},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.BKDisplayObject);t.BKShape=e,__reflect(e.prototype,"egret.BKShape"),t.Shape=e}(egret||(egret={}));var egret;!function(t){var e=function(){function t(t,e){this.surface={},this.context={}}return Object.defineProperty(t.prototype,"width",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.resize=function(t,e,i){},t.prototype.getPixels=function(t,e,i,r){return void 0===i&&(i=1),void 0===r&&(r=1),[]},t.prototype.toDataURL=function(t,e){return""},t.prototype.clear=function(){},t.prototype.destroy=function(){},t}();t.BKRenderBuffer=e,__reflect(e.prototype,"egret.BKRenderBuffer",["egret.sys.RenderBuffer"]),t.sys.RenderBuffer=e}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}return t.prototype.render=function(t,e,i,r){return 0},t.prototype.drawNodeToBuffer=function(t,e,i,r){},t}();t.BKSystemRenderer=e,__reflect(e.prototype,"egret.BKSystemRenderer",["egret.sys.SystemRenderer"])}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){var i=t.call(this)||this;return i.width=0,i.height=0,i.source="",i.bkTexture=null,i.source=e,"string"==typeof i.source&&(i.bkTexture=new BK.Texture(i.source),i.width=i.bkTexture.size.width,i.height=i.bkTexture.size.height),i}return __extends(e,t),e.$invalidate=function(){},e}(t.HashObject);t.BKBitmapData=e,__reflect(e.prototype,"egret.BKBitmapData"),t.BitmapData=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._url="",t._method="",t.urlData={},t.responseHeader="",t}return __extends(i,e),Object.defineProperty(i.prototype,"responseType",{get:function(){return this._responseType},set:function(t){this._responseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"response",{get:function(){return this._response},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"withCredentials",{get:function(){return this._withCredentials},set:function(t){this._withCredentials=t},enumerable:!0,configurable:!0}),i.prototype.open=function(t,e){void 0===e&&(e="GET"),this._url=t,this._method=e},i.prototype.send=function(e){var i=this;if(i.isNetUrl(i._url)){var r=i._url,n=this.encodeURL(r);this._bkHttpRequest=new BK.HttpUtil(n);var o=void 0;this._method===t.HttpMethod.GET?o="get":this._method===t.HttpMethod.POST&&(o="post"),this._bkHttpRequest.setHttpMethod(o),this._method===t.HttpMethod.POST&&this._bkHttpRequest.setHttpPostData(e),this._bkHttpRequest.setHttpCookie(e),this._bkHttpRequest.requestAsync(function(e,r){if(200===Number(r)){if(i._responseType===t.HttpResponseType.ARRAY_BUFFER)i._response=t.bricksBufferToArrayBuffer(e);else{var n=new t.ByteArray(t.bricksBufferToArrayBuffer(e));i._response=n.readUTFBytes(n.length)}t.$callAsync(t.Event.dispatchEvent,t.Event,i,t.Event.COMPLETE)}else t.$warn(1019,r),t.Event.dispatchEvent(i,t.IOErrorEvent.IO_ERROR)})}else if(BK.FileUtil.isFileExist(i._url)){var s=BK.FileUtil.readFile(i._url);i._responseType===t.HttpResponseType.ARRAY_BUFFER?i._response=t.bricksBufferToArrayBuffer(s):i._response=s.readAsString()||"",t.$callAsync(t.Event.dispatchEvent,t.Event,i,t.Event.COMPLETE)}else t.$callAsync(t.Event.dispatchEvent,t.IOErrorEvent,i,t.IOErrorEvent.IO_ERROR)},i.prototype.encodeURL=function(t){if(!t||""===t)return"";var e=t.indexOf("?");if(0>e)return t;for(var i=t.slice(0,e),r=t.slice(e+1),n=r.split("&"),o="",s=0;s<n.length;s++){var h=n[s],a=h.split("="),l=a[0],d=a[1]?a[1]:"";o+=l+"="+encodeURIComponent(d),s<n.length-1&&(o+="&")}return i+"?"+o},i.prototype.isNetUrl=function(t){return-1!=t.indexOf("http://")||-1!=t.indexOf("HTTP://")||-1!=t.indexOf("https://")||-1!=t.indexOf("HTTPS://")},i.prototype.abort=function(){},i.prototype.onResponseHeader=function(t){this.responseHeader="";var e=JSON.parse(t);for(var i in e)this.responseHeader+=i+": "+e[i]+"\r\n"},i.prototype.getAllResponseHeaders=function(){return this.responseHeader},i.prototype.setRequestHeader=function(t,e){this.headerObj||(this.headerObj={}),this.headerObj[t]=e},i.prototype.getResponseHeader=function(t){return""},i}(t.EventDispatcher);t.BKHttpRequest=e,__reflect(e.prototype,"egret.BKHttpRequest",["egret.HttpRequest"]),t.HttpRequest=e}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}return e.prototype.addCallBacks=function(t,e,i,r,n){this.onConnect=t,this.onClose=e,this.onSocketData=i,this.onError=r,this.thisObject=n},e.prototype.connect=function(t,e){var i=t+":"+e;this.connectByUrl(i)},e.prototype.connectByUrl=function(t){this.$websocket=new BK.WebSocket(t),this.$websocket.connect(),this._bindEvent()},e.prototype._bindEvent=function(){var e=this,i=this.$websocket;i.onOpen=function(t){e.onConnect&&e.onConnect.call(e.thisObject)},i.onClose=function(t){e.onClose&&e.onClose.call(e.thisObject)},i.onError=function(t){e.onError&&e.onError.call(e.thisObject)},i.onMessage=function(i,r){if(e.onSocketData){var n=void 0,o=r.data;if(r.isBinary)n=t.bricksBufferToArrayBuffer(o);else{var s=new t.ByteArray(t.bricksBufferToArrayBuffer(o));n=s.readUTFBytes(s.length)}e.onSocketData.call(e.thisObject,n)}}},e.prototype.send=function(e){if("string"==typeof e)this.$websocket.send(e);else if(e instanceof ArrayBuffer){var i=t.arrayBufferToBrickBuffer(e);this.$websocket.send(i)}},e.prototype.resHandler=function(e){switch(e.type){case t.Event.COMPLETE:var i=e.currentTarget;i.response;console.log()}},e.prototype.close=function(){this.$websocket.close()},e.prototype.disconnect=function(){},e}();t.BKSocket=e,__reflect(e.prototype,"egret.BKSocket",["egret.ISocket"]),t.ISocket=e}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this._contentWidth=0,this._contentHeight=0,this._size={width:0,height:0},this._rawGrid=new t.Rectangle,this._grid=new t.Rectangle,this._leftTop=new BK.Sprite(0,0,{},0,1,1,1),this._centerTop=new BK.Sprite(0,0,{},0,1,1,1),this._rightTop=new BK.Sprite(0,0,{},0,1,1,1),this._leftCenter=new BK.Sprite(0,0,{},0,1,1,1),this._centerCenter=new BK.Sprite(0,0,{},0,1,1,1),this._rightCenter=new BK.Sprite(0,0,{},0,1,1,1),this._leftBottom=new BK.Sprite(0,0,{},0,1,1,1),this._centerBottom=new BK.Sprite(0,0,{},0,1,1,1),this._rightBottom=new BK.Sprite(0,0,{},0,1,1,1),this.__nativeObj=new BK.Node,t.defineProxyProperties(this.__nativeObj,this),this.__nativeObj.addChild(this._leftTop),this.__nativeObj.addChild(this._centerTop),this.__nativeObj.addChild(this._rightTop),this.__nativeObj.addChild(this._leftCenter),this.__nativeObj.addChild(this._centerCenter),this.__nativeObj.addChild(this._rightCenter),this.__nativeObj.addChild(this._leftBottom),this.__nativeObj.addChild(this._centerBottom),this.__nativeObj.addChild(this._rightBottom)}return e.prototype._updateGrid=function(){this._grid.x=this._rawGrid.x,this._grid.y=this._rawGrid.y,this._grid.width=this._contentWidth-this._rawGrid.x-this._rawGrid.width,this._grid.height=this._contentHeight-this._rawGrid.y-this._rawGrid.height},e.prototype.dispose=function(){this.__nativeObj.dispose()},e.prototype.setTexture=function(t){this._leftTop.setTexture(t),this._centerTop.setTexture(t),this._rightTop.setTexture(t),this._leftCenter.setTexture(t),this._centerCenter.setTexture(t),this._rightCenter.setTexture(t),this._leftBottom.setTexture(t),this._centerBottom.setTexture(t),this._rightBottom.setTexture(t)},e.prototype.setScale9Grid=function(t){this._rawGrid.setTo(t.x,t.y,t.width,t.height),this._updateGrid()},e.prototype.adjustTexturePosition=function(t,e,i,r,n){this._contentWidth=i,this._contentHeight=r,this._updateGrid();var o=this._grid.x,s=this._grid.y,h=this._grid.width,a=this._grid.height,l=i-o-h,d=r-s-a;if(n===!0);else{var u=t,c=t+o,p=t+(i-h),f=e,g=e+a,y=e+(r-s);this._leftTop.adjustTexturePosition(u,y,o,s),this._centerTop.adjustTexturePosition(c,y,l,s),this._rightTop.adjustTexturePosition(p,y,h,s),this._leftCenter.adjustTexturePosition(u,g,o,d),this._centerCenter.adjustTexturePosition(c,g,l,d),this._rightCenter.adjustTexturePosition(p,g,h,d),this._leftBottom.adjustTexturePosition(u,f,o,a),this._centerBottom.adjustTexturePosition(c,f,l,a),this._rightBottom.adjustTexturePosition(p,f,h,a)}},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(t){var e=this._size.width=t.width,i=this._size.height=t.height,r=this._grid.x,n=this._grid.y,o=this._grid.width,s=this._grid.height;if(r+o>e){var h=.5*(r+o-e);r-=h,o-=h}if(n+s>i){var a=.5*(n+s-i);n-=a,s-=a}var l=e-r-o,d=i-n-s;this._leftTop.position={x:0,y:s+d},this._centerTop.position={x:r,y:s+d},this._rightTop.position={x:r+l,y:s+d},this._leftCenter.position={x:0,y:s},this._centerCenter.position={x:r,y:s},this._rightCenter.position={x:r+l,y:s},this._leftBottom.position={x:0,y:0},this._centerBottom.position={x:r,y:0},this._rightBottom.position={x:r+l,y:0},this._leftTop.size={width:r+1,height:n+1},this._centerTop.size={width:l+1,height:n+1},this._rightTop.size={width:o,height:n+1},this._leftCenter.size={width:r+1,height:d+1},this._centerCenter.size={width:l+1,height:d+1},this._rightCenter.size={width:o,height:d+1},this._leftBottom.size={width:r+1,height:s},this._centerBottom.size={width:l+1,height:s},this._rightBottom.size={width:o,height:s}},enumerable:!0,configurable:!0}),e}();t.BKSprite9=e,__reflect(e.prototype,"egret.BKSprite9")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t){void 0===t&&(t=null);var i=e.call(this,new BK.Sprite(0,0,{},0,1,1,1))||this;return i.$explicitBitmapWidth=0/0,i.$explicitBitmapHeight=0/0,i._size={width:0,height:0},i.$bitmapData=null,i.$texture=null,i.$scale9Grid=null,i._bkSprite=i._bkNode,i.texture=t,i}return __extends(i,e),Object.defineProperty(i.prototype,"texture",{get:function(){return this.$texture},set:function(t){this.$texture!==t&&this.$setTexture(t)},enumerable:!0,configurable:!0}),i.prototype.$setTexture=function(t){this.$texture=t,this._transformDirty=!0,this.$texture?(this.$bitmapData=this.$texture.bitmapData,this.$bitmapData.bkTexture?(this._bkSprite.setTexture(this.$bitmapData.bkTexture),this._bkSprite.adjustTexturePosition(this.$texture.$bitmapX,this.$texture.$sourceHeight-(this.$texture.$bitmapY+this.$texture.$bitmapHeight),this.$texture.$bitmapWidth,this.$texture.$bitmapHeight,this.$texture.$rotated),this._size.width=this.$getWidth(),this._size.height=this.$getHeight(),this._bkSprite.size=this._size):(this.$bitmapData=null,this._bkSprite.setTexture({}))):(this.$bitmapData=null,this._bkSprite.setTexture({}))},Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(t){this.$setScale9Grid(t)},enumerable:!0,configurable:!0}),i.prototype.$setScale9Grid=function(e){var i=this;i.$scale9Grid!=e&&(i.$scale9Grid?e?this._bkSprite.setScale9Grid(e):(this._bkSprite=new BK.Sprite(0,0,{},0,1,1,1),this._replaceNode(this._bkSprite),this.$setTexture(this.$texture)):e&&(this._bkSprite=new t.BKSprite9,this._replaceNode(this._bkSprite),this._bkSprite.setScale9Grid(e),this.$setTexture(this.$texture)),this._bkSprite.size=this._size,i.$scale9Grid=e,i.$renderDirty=!0)},i.prototype.$setWidth=function(t){var e=this;return 0>t||t==e.$explicitBitmapWidth?!1:(e.$explicitBitmapWidth=t,this._transformDirty=!0,this._size.width=t,this._bkSprite.size=this._size,!0)},i.prototype.$setHeight=function(t){var e=this;return 0>t||t==e.$explicitBitmapHeight?!1:(e.$explicitBitmapHeight=t,this._transformDirty=!0,this._size.height=t,this._bkSprite.size=this._size,!0)},i.prototype.$getWidth=function(){return isNaN(this.$explicitBitmapWidth)?this.$getContentBounds().width:this.$explicitBitmapWidth},i.prototype.$getHeight=function(){return isNaN(this.$explicitBitmapHeight)?this.$getContentBounds().height:this.$explicitBitmapHeight},i.prototype.$measureContentBounds=function(t){if(this.$texture){var e=isNaN(this.$explicitBitmapWidth)?this.$texture.$getTextureWidth():this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?this.$texture.$getTextureHeight():this.$explicitBitmapHeight;t.setTo(0,0,e,i)}else{var e=isNaN(this.$explicitBitmapWidth)?0:this.$explicitBitmapWidth,i=isNaN(this.$explicitBitmapHeight)?0:this.$explicitBitmapHeight;t.setTo(0,0,e,i)}},i.prototype.$getRenderNode=function(){if(this._updateColor(),this._transformDirty||this.$matrixDirty){this._transformDirty=!1;var t=this.$getMatrix(),e=this._bkNode.transform.matrix,i=t.tx,r=t.ty,n=this.$anchorOffsetX,o=this.$anchorOffsetY-this._size.height;(0!==n||0!==o)&&(i-=t.a*n+t.c*o,r-=t.b*n+t.d*o),e.set(t.a,-t.b,-t.c,t.d,i,-r)}return this._bkNode||null},i}(t.BKDisplayObject);t.BKBitmap=e,__reflect(e.prototype,"egret.BKBitmap"),t.Bitmap=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this,new BK.Mesh(t.emptyTexture,[{x:0,y:0,z:0,r:1,g:1,b:1,a:1,u:0,v:1},{x:0,y:0,z:0,r:1,g:1,b:1,a:1,u:1,v:1},{x:0,y:-0,z:0,r:1,g:1,b:1,a:1,u:0,v:0}],[0,1,2]))||this;return i._textureDirty=!0,i._verticesDirty=!0,i._boundsDirty=!0,i._bounds=new t.Rectangle,i.$bitmapData=null,i.$texture=null,i.$renderNode=new t.sys.MeshNode,i._bkMesh=i._bkNode,i}return __extends(i,e),Object.defineProperty(i.prototype,"texture",{get:function(){return this.$texture},set:function(t){this.$texture!==t&&this.$setTexture(t)},enumerable:!0,configurable:!0}),i.prototype.$setTexture=function(t){this.$texture=t,this._transformDirty=!0,this.$texture?(this.$bitmapData=this.$texture.bitmapData,this.$bitmapData.bkTexture?this._bkMesh.setTexture(this.$bitmapData.bkTexture):(this.$bitmapData=null,this._bkMesh.setTexture({}))):(this.$bitmapData=null,this._bkMesh.setTexture({}))},i.prototype.$updateVertices=function(){this._verticesDirty=!0,this._boundsDirty=!0,this.$renderNode=new t.sys.MeshNode},i.prototype.$measureContentBounds=function(t){if(this._boundsDirty){this._boundsDirty=!1;var e=this.$renderNode,i=e.vertices;if(i.length){this._bounds.setTo(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var r=0,n=i.length;n>r;r+=2){var o=i[r],s=i[r+1];this._bounds.x>o&&(this._bounds.x=o),this._bounds.width<o&&(this._bounds.width=o),this._bounds.y>s&&(this._bounds.y=s),this._bounds.height<s&&(this._bounds.height=s)}this._bounds.width-=this._bounds.x,this._bounds.height-=this._bounds.y}else this._bounds.setTo(0,0,0,0);e.bounds.copyFrom(this._bounds)}t.copyFrom(this._bounds)},i.prototype.$getRenderNode=function(){if(this._verticesDirty){this._verticesDirty=!1;var t=this.$renderNode,e=t.vertices,i=t.uvs,r=this._bkMesh.getVertices();if(r||(r=[]),r.length!==e.length/2){for(var n=r.length,o=e.length/2;o>n;++n)r[n]={};for(var s=this.$texture.$rotated,h=this.$texture.$bitmapX,a=this.$texture.$bitmapY,l=this.$texture.$bitmapWidth,d=this.$texture.$bitmapHeight,u=this.$texture.$sourceWidth,c=this.$texture.$sourceHeight,p=h/u,f=s?d/u:l/u,g=a/c,y=s?l/c:d/c,n=0,$=0,o=r.length;o>n;++n,$+=2){var x=r[n],b=i[$],_=i[$+1];x.x=e[$],x.y=-e[$+1],x.z=this._bkNode.zOrder,x.r=1,x.g=1,x.b=1,x.a=1,s?(x.u=p+(1-_)*f,x.v=1-(g+b*y)):(x.u=p+b*f,x.v=1-(g+_*y))}}else for(var n=0,$=0,o=r.length;o>n;++n,$+=2){var x=r[n];x.x=e[$],x.y=-e[$+1]}this._bkMesh.setVerticesAndIndices(r,t.indices)}if(this._transformDirty||this.$matrixDirty){this._transformDirty=!1;var v=this.$getMatrix(),T=this._bkNode.transform.matrix,m=v.tx,B=v.ty,S=this.$anchorOffsetX,F=this.$anchorOffsetY;(0!==S||0!==F)&&(m-=v.a*S+v.c*F,B-=v.b*S+v.d*F),T.set(v.a,-v.b,-v.c,v.d,m,-B)}return this._bkNode},i}(t.BKDisplayObject);t.BKMesh=e,__reflect(e.prototype,"egret.BKMesh"),t.Mesh=e}(egret||(egret={}));var egret;!function(t){function e(t,e){for(var i=Object.getOwnPropertyNames(t),r=function(i){Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e}})},n=0,o=i;n<o.length;n++){var s=o[n];r(s)}}function i(t){for(var e=new ArrayBuffer(t.bufferLength()),i=new Uint8Array(e),r=0;r<t.bufferLength();)i[r++]=t.readUint8Buffer();return e}function r(t){for(var e=new BK.Buffer(t.byteLength),i=new Uint8Array(t),r=0;r<t.byteLength;)e.writeUint8Buffer(i[r++]);return e}t.emptyTexture=new BK.Texture("GameRes://resource/empty.png"),t.defineProxyProperties=e,t.bricksBufferToArrayBuffer=i,t.arrayBufferToBrickBuffer=r}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$graphics=new t.Graphics,i.$graphics.$setTarget(i),i}return __extends(i,e),Object.defineProperty(i.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(e,i){if(!this.$visible)return null;var r=this.$getInvertedConcatenatedMatrix(),n=r.a*e+r.c*i+r.tx,o=r.b*e+r.d*i+r.ty,s=this.$scrollRect?this.$scrollRect:this.$maskRect;if(s&&!s.contains(n,o))return null;if(this.$mask&&!this.$mask.$hitTest(e,i))return null;for(var h=this.$children,a=!1,l=null,d=h.length-1;d>=0;d--){var u=h[d];if(!u.$maskedObject&&(l=u.$hitTest(e,i))){if(a=!0,l.$touchEnabled)break;l=null}}return l?this.$touchChildren?l:this:a?this:(l=t.DisplayObject.prototype.$hitTest.call(this,e,i),l&&(l=this.$graphics.$hitTest(e,i)),l)},i.prototype.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},i.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},i}(t.BKDisplayObjectContainer);t.BKSprite=e,__reflect(e.prototype,"egret.BKSprite"),t.Sprite=e}(egret||(egret={}));var egret;!function(t){function e(e,i,r){r=r||{};var n=null==r.italic?i[16]:r.italic,o=null==r.bold?i[15]:r.bold,s=null==r.size?i[0]:r.size,h=r.fontFamily||i[8]||t.TextField.default_fontFamily;return t.sys.measureText(e,h,s,o,n)}function i(t,e){if(l.length>0){var i=l.pop();return i.updateText(e,t),i}var r=new BK.TextNode(e,t);return r}function r(t,e,i,r,n){return s||(s=new BK.TextNode(a,"")),a.fontSize=i,a.bold=r?1:0,a.italic=n?1:0,s.updateText(a,t),s.width}var n=new RegExp("(?=[\\u00BF-\\u1FFF\\u2C00-\\uD7FF]|\\b|\\s)(?![。，！、》…）)}”】\\.\\,\\!\\?\\]\\:])"),o=function(r){function o(){var e=r.call(this)||this;return e.$inputEnabled=!1,e.inputUtils=null,e.graphicsNode=null,e.isFlow=!1,e.textArr=[],e.linesArr=[],e.$isTyping=!1,e._bkTextNodes=[],e._bkTextContainer=e._bkNode,e.$TextField={0:t.TextField.default_size,1:0,2:t.TextField.default_textColor,3:0/0,4:0/0,5:0,6:0,7:0,8:t.TextField.default_fontFamily,9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:t.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null,37:t.TextFieldInputType.TEXT},e}return __extends(o,r),o.prototype.isInput=function(){return this.$TextField[24]==t.TextFieldType.INPUT},o.prototype.$setTouchEnabled=function(t){r.prototype.$setTouchEnabled.call(this,t),this.isInput()&&(this.$inputEnabled=!0)},Object.defineProperty(o.prototype,"fontFamily",{get:function(){return this.$TextField[8]},set:function(t){this.$setFontFamily(t)},enumerable:!0,configurable:!0}),o.prototype.$setFontFamily=function(t){var e=this.$TextField;return e[8]==t?!1:(e[8]=t,this.invalidateFontString(),!0)},Object.defineProperty(o.prototype,"size",{get:function(){return this.$TextField[0]},set:function(t){this.$setSize(t)},enumerable:!0,configurable:!0}),o.prototype.$setSize=function(t){t=+t||0;var e=this.$TextField;return e[0]==t?!1:(e[0]=t,this.invalidateFontString(),this._transformDirty=!0,!0)},Object.defineProperty(o.prototype,"bold",{get:function(){return this.$TextField[15]},set:function(t){this.$setBold(t)},enumerable:!0,configurable:!0}),o.prototype.$setBold=function(t){t=!!t;var e=this.$TextField;return t==e[15]?!1:(e[15]=t,this.invalidateFontString(),this._transformDirty=!0,!0)},Object.defineProperty(o.prototype,"italic",{get:function(){return this.$TextField[16]},set:function(t){this.$setItalic(t)},enumerable:!0,configurable:!0}),o.prototype.$setItalic=function(t){t=!!t;var e=this.$TextField;return t==e[16]?!1:(e[16]=t,this.invalidateFontString(),this._transformDirty=!0,!0)},o.prototype.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},Object.defineProperty(o.prototype,"textAlign",{get:function(){return this.$TextField[9]},set:function(t){this.$setTextAlign(t)},enumerable:!0,configurable:!0}),o.prototype.$setTextAlign=function(t){var e=this.$TextField;return e[9]==t?!1:(e[9]=t,this.$invalidateTextField(),!0)},Object.defineProperty(o.prototype,"verticalAlign",{get:function(){return this.$TextField[10]},set:function(t){this.$setVerticalAlign(t)},enumerable:!0,configurable:!0}),o.prototype.$setVerticalAlign=function(t){var e=this.$TextField;return e[10]==t?!1:(e[10]=t,this.$invalidateTextField(),!0)},Object.defineProperty(o.prototype,"lineSpacing",{get:function(){return this.$TextField[1]},set:function(t){this.$setLineSpacing(t)},enumerable:!0,configurable:!0}),o.prototype.$setLineSpacing=function(t){t=+t||0;var e=this.$TextField;return e[1]==t?!1:(e[1]=t,this.$invalidateTextField(),!0)
},Object.defineProperty(o.prototype,"textColor",{get:function(){return this.$TextField[2]},set:function(t){this.$setTextColor(t)},enumerable:!0,configurable:!0}),o.prototype.$setTextColor=function(t){t=0|+t;var e=this.$TextField;return e[2]==t?!1:(e[2]=t,this.inputUtils&&this.inputUtils._setColor(this.$TextField[2]),this.$invalidateTextField(),!0)},Object.defineProperty(o.prototype,"wordWrap",{get:function(){return this.$TextField[19]},set:function(t){this.$setWordWrap(t)},enumerable:!0,configurable:!0}),o.prototype.$setWordWrap=function(t){t=!!t;var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField()))},Object.defineProperty(o.prototype,"type",{get:function(){return this.$TextField[24]},set:function(t){this.$setType(t)},enumerable:!0,configurable:!0}),o.prototype.$setType=function(e){var i=this.$TextField;return i[24]!=e?(i[24]=e,e==t.TextFieldType.INPUT?(isNaN(i[3])&&this.$setWidth(100),isNaN(i[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this.inputUtils&&(this.inputUtils=new t.InputController),this.inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this.inputUtils._addStageText()):(this.inputUtils&&(this.inputUtils._removeStageText(),this.inputUtils=null),this.$setTouchEnabled(!1)),!0):!1},Object.defineProperty(o.prototype,"inputType",{get:function(){return this.$TextField[37]},set:function(t){this.$TextField[37]=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"text",{get:function(){return this.$getText()},set:function(t){this.$setText(t)},enumerable:!0,configurable:!0}),o.prototype.$getText=function(){return this.$TextField[24]==t.TextFieldType.INPUT?this.inputUtils._getText():this.$TextField[13]},o.prototype.$setBaseText=function(t){null==t&&(t=""),t=t.toString(),this.isFlow=!1;var e=this.$TextField;if(e[13]!=t){this.$invalidateTextField(),e[13]=t;var i="";return i=e[20]?this.changeToPassText(t):t,this.setMiddleStyle([{text:i}]),this._transformDirty=!0,!0}return!1},o.prototype.$setText=function(t){null==t&&(t="");var e=this.$setBaseText(t);return this.inputUtils&&this.inputUtils._setText(this.$TextField[13]),e},Object.defineProperty(o.prototype,"displayAsPassword",{get:function(){return this.$TextField[20]},set:function(t){this.$setDisplayAsPassword(t)},enumerable:!0,configurable:!0}),o.prototype.$setDisplayAsPassword=function(t){var e=this.$TextField;if(e[20]!=t){e[20]=t,this.$invalidateTextField();var i="";return i=t?this.changeToPassText(e[13]):e[13],this.setMiddleStyle([{text:i}]),!0}return!1},Object.defineProperty(o.prototype,"strokeColor",{get:function(){return this.$TextField[25]},set:function(t){t=+t||0,this.$setStrokeColor(t)},enumerable:!0,configurable:!0}),o.prototype.$setStrokeColor=function(e){var i=this.$TextField;return i[25]!=e?(this.$invalidateTextField(),i[25]=e,i[26]=t.toColorString(e),!0):!1},Object.defineProperty(o.prototype,"stroke",{get:function(){return this.$TextField[27]},set:function(t){this.$setStroke(t)},enumerable:!0,configurable:!0}),o.prototype.$setStroke=function(t){return this.$TextField[27]!=t?(this.$invalidateTextField(),this.$TextField[27]=t,this._transformDirty=!0,!0):!1},Object.defineProperty(o.prototype,"maxChars",{get:function(){return this.$TextField[21]},set:function(t){this.$setMaxChars(t)},enumerable:!0,configurable:!0}),o.prototype.$setMaxChars=function(t){return this.$TextField[21]!=t?(this.$TextField[21]=t,!0):!1},Object.defineProperty(o.prototype,"scrollV",{get:function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},set:function(t){this.$TextField[28]=Math.max(t,1),this.$invalidateTextField()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"maxScrollV",{get:function(){return this.$getLinesArr(),Math.max(this.$TextField[29]-t.TextFieldUtils.$getScrollNum(this)+1,1)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selectionBeginIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"selectionEndIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"caretIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),o.prototype.$setSelection=function(t,e){return!1},o.prototype.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},Object.defineProperty(o.prototype,"numLines",{get:function(){return this.$getLinesArr(),this.$TextField[29]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"multiline",{get:function(){return this.$TextField[30]},set:function(t){this.$setMultiline(t)},enumerable:!0,configurable:!0}),o.prototype.$setMultiline=function(t){return this.$TextField[30]=t,this.$invalidateTextField(),!0},Object.defineProperty(o.prototype,"restrict",{get:function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},set:function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&(i=t.indexOf("^",i),0!=i)&&i>0&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):i>0?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}},enumerable:!0,configurable:!0}),o.prototype.$setWidth=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[3]))return!1;e[3]=0/0}else{if(e[3]==t)return!1;e[3]=t}return t=+t,0>t?!1:(this.$invalidateTextField(),this._transformDirty=!0,!0)},o.prototype.$setHeight=function(t){var e=this.$TextField;if(isNaN(t)){if(isNaN(e[4]))return!1;e[4]=0/0}else{if(e[4]==t)return!1;e[4]=t}return t=+t,0>t?!1:(this.$invalidateTextField(),this._transformDirty=!0,!0)},o.prototype.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},o.prototype.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},Object.defineProperty(o.prototype,"border",{get:function(){return this.$TextField[31]},set:function(t){this.$setBorder(t)},enumerable:!0,configurable:!0}),o.prototype.$setBorder=function(t){this.$TextField[31]=!!t},Object.defineProperty(o.prototype,"borderColor",{get:function(){return this.$TextField[32]},set:function(t){this.$setBorderColor(t)},enumerable:!0,configurable:!0}),o.prototype.$setBorderColor=function(t){this.$TextField[32]=+t||0},Object.defineProperty(o.prototype,"background",{get:function(){return this.$TextField[33]},set:function(t){this.$setBackground(t)},enumerable:!0,configurable:!0}),o.prototype.$setBackground=function(t){this.$TextField[33]=t},Object.defineProperty(o.prototype,"backgroundColor",{get:function(){return this.$TextField[34]},set:function(t){this.$setBackgroundColor(t)},enumerable:!0,configurable:!0}),o.prototype.$setBackgroundColor=function(t){this.$TextField[34]=t},o.prototype.fillBackground=function(e){var i=this.graphicsNode;i&&i.clear();var r=this.$TextField;if(r[33]||r[31]||e&&e.length>0){if(!i){i=this.graphicsNode=new t.sys.GraphicsNode;var n=new t.sys.GroupNode;n.addNode(i),n.addNode(this.textNode),this.$renderNode=n}var o=void 0,s=void 0;if(r[33]&&(o=i.beginFill(r[34]),o.drawRect(0,0,this.$getWidth(),this.$getHeight())),r[31]&&(s=i.lineStyle(1,r[32]),s.drawRect(0,0,this.$getWidth()-1,this.$getHeight()-1)),e&&e.length>0)for(var h=r[2],a=-1,l=e.length,d=0;l>d;d+=4){var u=e[d],c=e[d+1],p=e[d+2],f=e[d+3]||h;(0>a||a!=f)&&(a=f,s=i.lineStyle(2,f,1,t.CapsStyle.NONE)),s.moveTo(u,c),s.lineTo(u+p,c)}}if(i){var g=this.$getRenderBounds();i.x=g.x,i.y=g.y,i.width=g.width,i.height=g.height,t.Rectangle.release(g)}},o.prototype.setFocus=function(){this.type==t.TextFieldType.INPUT&&this.$stage&&this.inputUtils.$onFocus()},o.prototype.$onRemoveFromStage=function(){r.prototype.$onRemoveFromStage.call(this),this.removeEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._removeStageText(),this.textNode&&this.textNode.clean()},o.prototype.$onAddToStage=function(e,i){r.prototype.$onAddToStage.call(this,e,i),this.addEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this.inputUtils._addStageText()},o.prototype.$invalidateTextField=function(){var t=this;t.$renderDirty=!0,t.$TextField[18]=!0},o.prototype.$getRenderBounds=function(){var e=this.$getContentBounds(),i=t.Rectangle.create();i.copyFrom(e),this.$TextField[31]&&(i.width+=2,i.height+=2);var r=2*this.$TextField[27];return r>0&&(i.width+=2*r,i.height+=2*r),i.x-=r+2,i.y-=r+2,i.width=Math.ceil(i.width)+4,i.height=Math.ceil(i.height)+4,i},o.prototype.$measureContentBounds=function(e){this.$getLinesArr();var i=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],r=isNaN(this.$TextField[4])?t.TextFieldUtils.$getTextHeight(this):this.$TextField[4];e.setTo(0,0,i,r)},Object.defineProperty(o.prototype,"textFlow",{get:function(){return this.textArr},set:function(t){this.isFlow=!0;var e="";null==t&&(t=[]);for(var i=0;i<t.length;i++){var r=t[i];e+=r.text}this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t))},enumerable:!0,configurable:!0}),o.prototype.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,r=t.length;r>i;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},o.prototype.setMiddleStyle=function(t){this.$TextField[18]=!0,this.textArr=t,this.$invalidateTextField()},Object.defineProperty(o.prototype,"textWidth",{get:function(){return this.$getLinesArr(),this.$TextField[5]},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"textHeight",{get:function(){return this.$getLinesArr(),t.TextFieldUtils.$getTextHeight(this)},enumerable:!0,configurable:!0}),o.prototype.appendText=function(t){this.appendElement({text:t})},o.prototype.appendElement=function(t){var e=this.$TextField[13]+t.text;this.$TextField[20]?this.$setBaseText(e):(this.$TextField[13]=e,this.textArr.push(t),this.setMiddleStyle(this.textArr))},o.prototype.$getLinesArr=function(){var i=this.$TextField;if(!i[18])return this.linesArr;i[18]=!1;var r=this.textArr;this.linesArr.length=0,i[6]=0,i[5]=0;var o=i[3];if(!isNaN(o)&&0==o)return i[29]=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];for(var s,h=this.linesArr,a=0,l=0,d=0,u=0,c=0,p=r.length;p>c;c++){var f=r[c];if(f.text){f.style=f.style||{};for(var g=f.text.toString(),y=g.split(/(?:\r\n|\r|\n)/),$=0,x=y.length;x>$;$++){null==h[u]&&(s={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},h[u]=s,a=0,d=0,l=0),d=i[24]==t.TextFieldType.INPUT?i[0]:Math.max(d,f.style.size||i[0]);var b=!0;if(""==y[$])$==x-1&&(b=!1);else{var _=e(y[$],i,f.style);if(isNaN(o))a+=_,l+=y[$].length,s.elements.push({width:_,text:y[$],style:f.style}),$==x-1&&(b=!1);else if(o>=a+_)s.elements.push({width:_,text:y[$],style:f.style}),a+=_,l+=y[$].length,$==x-1&&(b=!1);else{var v=0,T=0,m=y[$],B=void 0;B=i[19]?m.split(n):m.match(/./g);for(var S=B.length,F=0;S>v;v++){var C=B[v].length,k=!1;if(1==C&&S-1>v){var N=B[v].charCodeAt(0),O=B[v+1].charCodeAt(0);if(N>=55296&&56319>=N&&56320==(64512&O)){var w=B[v]+B[v+1];C=2,k=!0,_=e(w,i,f.style)}else _=e(B[v],i,f.style)}else _=e(B[v],i,f.style);if(0!=a&&a+_>o&&a+v!=0)break;if(T+_>o)for(var E=B[v].match(/./g),R=0,D=E.length;D>R;R++){var C=E[R].length,P=!1;if(1==C&&D-1>R){var N=E[R].charCodeAt(0),O=E[R+1].charCodeAt(0);if(N>=55296&&56319>=N&&56320==(64512&O)){var w=E[R]+E[R+1];C=2,P=!0,_=e(w,i,f.style)}else _=e(E[R],i,f.style)}else _=e(E[R],i,f.style);if(R>0&&a+_>o)break;F+=C,T+=_,a+=_,l+=F,P&&R++}else F+=C,T+=_,a+=_,l+=F;k&&v++}if(v>0){s.elements.push({width:T,text:m.substring(0,F),style:f.style});var A=m.substring(F),K=void 0,j=A.length;for(K=0;j>K&&" "==A.charAt(K);K++);y[$]=A.substring(K)}""!=y[$]&&($--,b=!1)}}b&&(l++,s.hasNextLine=!0),$<y.length-1&&(s.width=a,s.height=d,s.charNum=l,i[5]=Math.max(i[5],a),i[6]+=d,u++)}c==r.length-1&&s&&(s.width=a,s.height=d,s.charNum=l,i[5]=Math.max(i[5],a),i[6]+=d)}else s&&(s.width=a,s.height=d,s.charNum=l,i[5]=Math.max(i[5],a),i[6]+=d)}return i[29]=h.length,h},o.prototype.drawText=function(){var e=this.$TextField,r=this.$getLinesArr();if(0==e[5])return[];var n=isNaN(e[3])?e[5]:e[3],o=t.TextFieldUtils.$getTextHeight(this),s=0,a=t.TextFieldUtils.$getStartLine(this),d=e[4];if(!isNaN(d)&&d>o){var u=t.TextFieldUtils.$getValign(this);s+=u*(d-o)}s=Math.round(s);for(var c=t.TextFieldUtils.$getHalign(this),p=0,f=0,g=[],y=a,$=e[29];$>y;y++){var x=r[y],b=x.height;if(s+=b,y!=a){if(e[24]==t.TextFieldType.INPUT&&!e[30])break;if(!isNaN(d)&&s>d)break}f=Math.round((n-x.width)*c);for(var _=0,v=x.elements.length;v>_;_++){var T=x.elements[_],m=T.style.size||e[0];h.italic=T.style.italic?1:e[16],h.bold=T.style.bold?1:e[15],h.fontSize=m,h.strokeSize=isNaN(Number(T.style.stroke))?e[27]:T.style.stroke,h.strokeColor=4278190080+(isNaN(Number(T.style.strokeColor))?e[25]:T.style.strokeColor),h.textColor=4278190080+(isNaN(Number(T.style.textColor))?e[2]:T.style.textColor),h.width=h.maxWidth=T.width,h.height=h.maxHeight=1.15*m;var B=void 0;p<this._bkTextNodes.length?(B=this._bkTextNodes[p],B.updateText(h,T.text)):(B=i(T.text,h),this._bkTextNodes[p]=B,this._bkTextContainer.addChild(B)),B.position={x:f,y:-s},p++,T.style.underline&&g.push(f,s,T.width,T.style.textColor),f+=T.width}s+=e[1]}for(var y=p;y<this._bkTextNodes.length;++y){var B=this._bkTextNodes[y];l.push(B),this._bkTextContainer.removeChild(B)}return this._bkTextNodes.length=p,g},o.prototype.addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},o.prototype.removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},o.prototype.onTapHandler=function(e){if(this.$TextField[24]!=t.TextFieldType.INPUT){var i=t.TextFieldUtils.$getTextElement(this,e.localX,e.localY);if(null!=i){var r=i.style;if(r&&r.href)if(r.href.match(/^event:/)){var n=r.href.match(/^event:/)[0];t.TextEvent.dispatchTextEvent(this,t.TextEvent.LINK,r.href.substring(n.length))}else open(r.href,r.target||"_blank")}}},o.prototype._refitString=function(t,e){var i=t.toString(16),r="00000000";return r.substr(0,e-i.length)+i},o.prototype.$getRenderNode=function(){if(this.$renderDirty){if(this.$renderDirty=!1,this.$TextField[24]==t.TextFieldType.INPUT){if(this.inputUtils._updateProperties(),this.$isTyping)return void this.fillBackground()}else if(0==this.$TextField[3])return;var e=this.drawText();this.fillBackground(e)}if(this._transformDirty||this.$matrixDirty){this._transformDirty=!1;var i=this.$getMatrix(),r=this._bkNode.transform.matrix,n=i.tx,o=i.ty,s=this.$anchorOffsetX,h=this.$anchorOffsetY;(0!==s||0!==h)&&(n-=i.a*s+i.c*h,o-=i.b*s+i.d*h),r.set(i.a,-i.b,-i.c,i.d,n,-o)}return this._bkNode},o.default_fontFamily="Arial",o.default_size=30,o.default_textColor=16777215,o}(t.BKDisplayObject);t.BKTextField=o,__reflect(o.prototype,"egret.BKTextField");var s,h={fontSize:t.TextField.default_size,textColor:t.TextField.default_textColor+4278190080,maxWidth:64,maxHeight:64,width:64,height:64,textAlign:0,bold:0,italic:0,strokeColor:4278190080,strokeSize:0,shadowRadius:0,shadowDx:0,shadowDy:0,shadowColor:4278190080},a={fontSize:t.TextField.default_size,textColor:t.TextField.default_textColor+4278190080,maxWidth:1280,maxHeight:512,width:1280,height:512,textAlign:0,bold:0,italic:0,strokeColor:4278190080,strokeSize:0,shadowRadius:0,shadowDx:0,shadowDy:0,shadowColor:4278190080},l=[];t.sys.measureText=r,t.TextField=o}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.type=t.Sound.EFFECT,i}return __extends(i,e),i.prototype.load=function(e){this.url=e,BK.FileUtil.isFileExist(this.url)?t.$callAsync(t.Event.dispatchEvent,t.Event,this,t.Event.COMPLETE):t.$callAsync(t.Event.dispatchEvent,t.IOErrorEvent,this,t.IOErrorEvent.IO_ERROR)},i.prototype.play=function(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var r=new t.BKSoundChannel;return r.$loops=i,r.$startTime=e,r.$type=this.type,r.$url=this.url,r.$play(),r},i.prototype.close=function(){},i.MUSIC="music",i.EFFECT="effect",i}(t.EventDispatcher);t.BKSound=e,__reflect(e.prototype,"egret.BKSound",["egret.Sound"]),t.Sound=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.$play=function(){var e;switch(this.$type){case t.Sound.MUSIC:e=0;break;case t.Sound.EFFECT:e=1}var i=0===this.$loops?-1:this.$loops,r="GameRes://"+this.$url;this._bkAudio=new BK.Audio(e,r,i,0),this._bkAudio.startMusic()},i.prototype.stop=function(){this._bkAudio.stopMusic()},i}(t.EventDispatcher);t.BKSoundChannel=e,__reflect(e.prototype,"egret.BKSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=0,this.lineWidth=0,this.strokeColor={r:0,g:0,b:0,a:0},this.fillColor={r:0,g:0,b:0,a:0},this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.includeLastPosition=!0;var e=t.lifecycle.stage;this.stageW=e.stageWidth,this.stageH=e.stageHeight}return e.prototype.$setTarget=function(t){this.targetDisplay&&(this.targetDisplay.$renderNode=null),this.targetDisplay=t},e.prototype.setStrokeWidth=function(t){switch(t){case 1:this.topLeftStrokeWidth=0,this.bottomRightStrokeWidth=1;break;case 3:this.topLeftStrokeWidth=1,this.bottomRightStrokeWidth=2;break;default:var e=0|Math.ceil(.5*t);this.topLeftStrokeWidth=e,this.bottomRightStrokeWidth=e}},e.prototype.beginFill=function(t,e){void 0===e&&(e=1),t=+t||0,e=+e||0,this.isFillPath=!0;var i=this._refitString(t,6),r=parseInt(i.substring(0,2),16)/255,n=parseInt(i.substring(2,4),16)/255,o=parseInt(i.substring(4,6),16)/255;this.fillColor={r:r,g:n,b:o,a:e}},e.prototype._refitString=function(t,e){var i=t.toString(16),r="00000000";return r.substr(0,e-i.length)+i},e.prototype.beginGradientFill=function(t,e,i,r,n){void 0===n&&(n=null)},e.prototype.endFill=function(){this.isFillPath&&(this.isFillPath=!1),this.isStrokePath&&(this.isStrokePath=!1)},e.prototype.lineStyle=function(t,e,i,r,n,o,s,h,a){if(void 0===t&&(t=0/0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=!1),void 0===n&&(n="normal"),void 0===o&&(o=null),void 0===s&&(s=null),void 0===h&&(h=3),0>=t)this.isStrokePath=!1,this.lineWidth=0,this.setStrokeWidth(0);else{e=+e||0,i=+i||0,this.setStrokeWidth(t),this.lineWidth=t,this.isStrokePath=!0;var l=this._refitString(e,6),d=parseInt(l.substring(0,2),16)/255,u=parseInt(l.substring(2,4),16)/255,c=parseInt(l.substring(4,6),16)/255;this.strokeColor={r:d,g:u,b:c,a:i}}},e.prototype.drawRect=function(t,i,r,n){var o=+t||0,s=-i||0;if(r=+r||0,n=+n||0,this.isFillPath){var h=new BK.Texture(e.pixelPath);this.addSprite(h,o,s,r,n),this.extendBoundsByPoint(t+r,i+n),this.updatePosition(t,i)}},e.prototype.drawRoundRect=function(t,e,i,r,n,o){},e.prototype.roundRect=function(t,e,i,r,n,o){},e.prototype.drawCircle=function(t,i,r){var n=+t||0,o=-i||0;if(r=+r||0,this.isFillPath){var s=new BK.Texture(e.circlePath);this.addSprite(s,n,o,2*r,2*r,!0),this.extendBoundsByPoint(t-r-1,i-r-1),this.extendBoundsByPoint(t+r+2,i+r+2),this.updatePosition(t+r,i)}},e.prototype.addSprite=function(t,e,i,r,n,o){void 0===o&&(o=!1);var s=new BK.Sprite(r,n,t,0,1,1,1);s.position={x:e,y:i},s.vertexColor=this.fillColor,o?s.anchor={x:.5,y:.5}:s.anchor={x:0,y:1},this.targetDisplay._bkNode.addChild(s)},e.prototype.drawEllipse=function(t,i,r,n){var o=+t||0,s=-i||0;if(r=+r||0,n=+n||0,this.isFillPath){var h=new BK.Texture(e.circlePath),a=new BK.Sprite(r,n,h,0,1,1,1);a.position={x:o,y:s-n},a.vertexColor=this.fillColor,this.targetDisplay._bkNode.addChild(a),this.extendBoundsByPoint(t-1,i-1),this.extendBoundsByPoint(t+r+2,i+n+2),this.updatePosition(t+r,i+.5*n)}},e.prototype.moveTo=function(t,e){this.lastX=t,this.lastY=e},e.prototype.lineTo=function(t,i){if(this.isStrokePath){var r=t||0,n=-i||0,o=void 0!==this.lastX?this.lastX:r,s=void 0!==this.lastY?-this.lastY:n,h=Math.sqrt(Math.pow(r-o,2)+Math.pow(n-s,2)),a=void 0;a=r-o!==0?Math.atan((n-s)/(r-o))/Math.PI*180:n-s>0?90:-90;var l=new BK.Texture(e.pixelPath,6,0,0,1,1),d=new BK.Sprite(h,this.lineWidth,l,0,1,1,1);d.position={x:o,y:s},d.rotation={x:0,y:0,z:a},d.vertexColor=this.strokeColor,this.targetDisplay._bkNode.addChild(d),this.lastX=t,this.lastY=i}},e.prototype.curveTo=function(t,e,i,r){},e.prototype.cubicCurveTo=function(t,e,i,r,n,o){},e.prototype.drawArc=function(t,e,i,r,n,o){},e.prototype.clear=function(){},e.prototype.extendBoundsByPoint=function(t,e){this.extendBoundsByX(t),this.extendBoundsByY(e)},e.prototype.extendBoundsByX=function(t){this.minX=Math.min(this.minX,t-this.topLeftStrokeWidth),this.maxX=Math.max(this.maxX,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},e.prototype.extendBoundsByY=function(t){this.minY=Math.min(this.minY,t-this.topLeftStrokeWidth),this.maxY=Math.max(this.maxY,t+this.bottomRightStrokeWidth),this.updateNodeBounds()},e.prototype.updateNodeBounds=function(){},e.prototype.updatePosition=function(t,e){this.includeLastPosition||(this.extendBoundsByPoint(this.lastX,this.lastY),this.includeLastPosition=!0),this.lastX=t,this.lastY=e,this.extendBoundsByPoint(t,e)},e.prototype.$measureContentBounds=function(t){this.minX===1/0?t.setEmpty():t.setTo(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY)},e.prototype.$hitTest=function(t,e){for(var i=this.targetDisplay._bkNode,r=BK.Director.root.convertToWorldSpace({x:t,y:-e}),n=0;n<i.children.length;n++)if(i.children[n].hittest(r))return this.targetDisplay;return null},e.prototype.$onRemoveFromStage=function(){},e.pixelPath="GameRes://resource/pixel.png",e.circlePath="GameRes://resource/circle.png",e}();t.BKGraphics=e,__reflect(e.prototype,"egret.BKGraphics"),t.Graphics=e}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i;!function(e){function i(t){if(BK.FileUtil.isFileExist(s)){var e=BK.FileUtil.readFile(s).readAsString();if(e){var i=JSON.parse(e);return i?i[t]:void 0}}}function r(t,e){var i=BK.FileUtil.readFile(s).readAsString(),r={};if(i){var n=JSON.parse(i);n&&(r=n)}r[t]=e;var o=JSON.stringify(r);return BK.FileUtil.writeFile(s,o),!0}function n(t){var e=BK.FileUtil.readFile(s).readAsString();if(e){var i=JSON.parse(e);if(i&&i[t]){delete i[t];var r=JSON.stringify(i);BK.FileUtil.writeFile(s,r)}}}function o(){if(BK.FileUtil.isFileExist(s)){var t={},e=JSON.stringify(t);BK.FileUtil.writeFile(s,e)}}var s="GameSandBox://resource/localStorage";t.localStorage.setItem=r,t.localStorage.getItem=i,t.localStorage.removeItem=n,t.localStorage.clear=o}(i=e.BKlocalStorage||(e.BKlocalStorage={}))}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var i=e.call(this)||this;return i.$stageWidth=0,i.$stageHeight=0,i.$scaleMode=t.StageScaleMode.SHOW_ALL,i.$orientation=t.OrientationMode.AUTO,i.$maxTouches=99,i.$stage=i,i.$nestLevel=1,i}return __extends(i,e),Object.defineProperty(i.prototype,"frameRate",{get:function(){return t.ticker.$frameRate},set:function(e){t.ticker.$setFrameRate(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageWidth",{get:function(){return this.$stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stageHeight",{get:function(){return this.$stageHeight},enumerable:!0,configurable:!0}),i.prototype.invalidate=function(){t.sys.$invalidateRenderFlag=!0},i.prototype.registerImplementation=function(e,i){t.registerImplementation(e,i)},i.prototype.getImplementation=function(e){return t.getImplementation(e)},Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this.$scaleMode},set:function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"orientation",{get:function(){return this.$orientation},set:function(t){this.$orientation!=t&&(this.$orientation=t,this.$screen.updateScreenSize())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textureScaleFactor",{get:function(){return t.$TextureScaleFactor},set:function(e){t.$TextureScaleFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxTouches",{get:function(){return this.$maxTouches},set:function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dirtyRegionPolicy",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,e){this.$screen.setContentSize(t,e)},i}(t.BKDisplayObjectContainer);t.BKStage=e,__reflect(e.prototype,"egret.BKStage"),t.Stage=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(r){var n=e.call(this)||this;n.stage=new t.Stage,n._mainTicker=BK.Director.ticker,n._viewRect=new t.Rectangle,n._touch=new t.sys.TouchHandler(n.stage),n._displayList=[],i.instance=n,n._options=r,BK.Director.root.addChild(n.stage._bkNode),t.lifecycle.stage=n.stage,t.sys.$TempStage=n.stage,n.stage.$screen=n,n.stage.maxTouches=10,n.stage.frameRate=n._options.frameRate,n.stage.orientation=n._options.orientation,n.stage.scaleMode=n._options.scaleMode,n._mainTicker.add(function(){n._touchHandler(),t.ticker.update(),t.ticker.callLaters();for(var e=0,i=n._displayList;e<i.length;e++){var r=i[e];r.$getRenderNode()}},n),n.updateScreenSize(),n.updateMaxTouches();var o,s=n._options.entryClassName;if(s&&(o=t.getDefinitionByName(s)),o){var h=new o;h instanceof t.DisplayObject&&n.stage.addChild(h)}return n}return __extends(i,e),i.prototype._touchHandler=function(){var t=BK.TouchEvent.getTouchEvent();if(t&&0!==t.length){for(var e=0,i=t;e<i.length;e++){var r=i[e],n=r.id,o=(BK.Director.screenPixelSize,BK.Director.root.convertToNodeSpace(r)),s=o.x,h=-o.y;1===r.status?this._touch.onTouchEnd(s,h,n):2===r.status?this._touch.onTouchBegin(s,h,n):3===r.status&&this._touch.onTouchMove(s,h,n)}BK.TouchEvent.updateTouchStatus()}},i.prototype.updateScreenSize=function(){var e=BK.Director.screenPixelSize,i=e.width,r=e.height;t.Capabilities.$boundingClientWidth=i,t.Capabilities.$boundingClientHeight=r;var n=t.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,i,r,this._options.contentWidth,this._options.contentHeight),o=n.stageWidth,s=n.stageHeight,h=n.displayWidth,a=n.displayHeight,l=(r-a)/2,d=(i-h)/2;this.stage.$stageWidth=o,this.stage.$stageHeight=s,BK.Director.root.position={x:d,y:BK.Director.screenPixelSize.height-l},BK.Director.root.scale={x:h/o,y:a/s},this._viewRect.setTo(d,l,o,s),this.stage.dispatchEventWith(t.Event.RESIZE)},i.prototype.setContentSize=function(t,e){var i=this._options;i.contentWidth=t,i.contentHeight=e,this.updateScreenSize()},i.prototype.updateMaxTouches=function(){this._touch.$initMaxTouches()},i}(t.HashObject);t.BKPlayer=e,__reflect(e.prototype,"egret.BKPlayer",["egret.sys.Screen"])}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t.textValue="",t.onKeyboardComplete=t.onKeyboardComplete.bind(t),t.onKeyboardInput=t.onKeyboardInput.bind(t),t}return __extends(i,e),i.prototype.$setTextField=function(t){return this.$textfield=t,!0},i.prototype.$addToStage=function(){},i.prototype.$show=function(){BK.Editor.showKeyBoard(this.onKeyboardComplete,this.onKeyboardInput),this.dispatchEvent(new t.Event("focus"))},i.prototype.onKeyboardInput=function(e){this.textValue=e,t.Event.dispatchEvent(this,"updateText",!1)},i.prototype.onKeyboardComplete=function(t){this.$textfield.text=t,this.$hide()},i.prototype.$hide=function(){this.dispatchEvent(new t.Event("blur"))},i.prototype.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},i.prototype.$setText=function(t){return this.textValue=t,!0},i.prototype.$setColor=function(t){return!0},i.prototype.$onBlur=function(){},i.prototype.$removeFromStage=function(){},i.prototype.$resetStageText=function(){},i}(t.EventDispatcher);t.BKHTML5StageText=e,__reflect(e.prototype,"egret.BKHTML5StageText",["egret.StageText"]),t.StageText=e}(egret||(egret={})),console=console||{},console.warn=console.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i="";if(t)for(var r=0,n=t;r<n.length;r++){var o=n[r];i+=" "+o}BK.Script.log(0,0,i)},console.assert=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];t||console.log.apply(null,e)};var egret;!function(t){function e(t,e,i){BK.Director.ticker.setTimeout(t,i,e)}function i(t){BK.Director.ticker.removeTimeout(t)}function r(e){h||(h=!0,n(),o(),e||(e={}),e.screenAdapter?t.sys.screenAdapter=e.screenAdapter:t.sys.screenAdapter||(t.sys.screenAdapter=new t.sys.DefaultScreenAdapter),t.sys.systemRenderer=new t.BKSystemRenderer,t.sys.canvasRenderer=new t.BKSystemRenderer,s=new t.BKPlayer(e))}function n(){}function o(){"undefined"!=typeof eui&&(Object.defineProperty(eui.Image.prototype,"scale9Grid",{set:function(t){this.$setScale9Grid(t),this.invalidateDisplayList()},enumerable:!0,configurable:!0}),eui.Image.prototype.$getRenderNode=function(){var t=this.$bitmapData;if(!t)return null;var e=this.$UIComponent,i=e[10],r=e[11];if(0===i||0===r)return null;if(this._updateColor(),this._transformDirty||this.$matrixDirty){this._transformDirty=!1,this._size.width=this.$getWidth(),this._size.height=this.$getHeight(),this._bkSprite.size=this._size;var n=this.$getMatrix(),o=this._bkNode.transform.matrix,s=n.tx,h=n.ty,a=this.$anchorOffsetX,l=this.$anchorOffsetY-this._size.height;(0!==a||0!==l)&&(s-=n.a*a+n.c*l,h-=n.b*a+n.d*l),o.set(n.a,-n.b,-n.c,n.d,s,-h)}return this._bkNode}),void 0!==typeof t.WebSocket&&(t.ISocket=t.BKSocket)}t.getTimer=function(){return Math.round(1e3*BK.Time.timestamp)},t.setTimeout=e,t.clearTimeout=i;var s,h=!1;t.runEgret=r}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.data=null,t._crossOrigin=null,t._hasCrossOriginSet=!1,t}return __extends(i,e),Object.defineProperty(i.prototype,"crossOrigin",{get:function(){return this._crossOrigin},set:function(t){this._hasCrossOriginSet=!0,this._crossOrigin=t},enumerable:!0,configurable:!0}),i.prototype.load=function(e){BK.FileUtil.isFileExist(e)?(this.data=new t.BitmapData(e),t.$callAsync(t.Event.dispatchEvent,t.Event,this,t.Event.COMPLETE)):t.$callAsync(t.Event.dispatchEvent,t.IOErrorEvent,this,t.IOErrorEvent.IO_ERROR)},i.crossOrigin=null,i}(t.EventDispatcher);t.BKImageLoader=e,__reflect(e.prototype,"egret.BKImageLoader",["egret.ImageLoader"]),t.ImageLoader=e}(egret||(egret={}));